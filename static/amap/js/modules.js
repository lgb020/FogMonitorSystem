_jsload_('AMap.CustomLayer', 'var dd=Nc.extend({F:{visible:!0,opacity:1,zIndex:11,zooms:[3,20],alwaysRender:!1},C:function(a,b){this.CLASS_NAME="AMap.CustomLayer";f.e.hb(this.CLASS_NAME,b);this.sf=f.f.create("div",null,"amap-e");a&&(this.sf.appendChild(a),a.className="amap-custom");f.g.rb(this,b);this.jf(this.F)},setOpacity:function(a){f.e.add(this.CLASS_NAME,"setOpacity");this.sf&&f.f.Gm(this.sf,a);this.set("opacity",a,!0)},getContainer:function(){f.e.add(this.CLASS_NAME,"getContainer");return this.sf},show:function(){f.e.add(this.CLASS_NAME, "show");this.set("visible",!0)},hide:function(){f.e.add(this.CLASS_NAME,"hide");this.set("visible",!1)},setzIndex:function(a){f.e.add(this.CLASS_NAME,"setzIndex");this.set("zIndex",a,!0);this.sf&&(this.sf.style.zIndex=a)},ah:function(a){this.get("map")||this.set("map",a.P,!0);return new f.S.Tm(this,a)}});window.AMap.CustomLayer=dd;f.S.Tm=f.S.Pd.extend({C:function(a,b){this.Qa=a;this.Jj=!0;this.Dz=f.g.Bb(this);a&&this.td("opacity visible zIndex zooms container alwaysRender".split(" "),a);this.j=b;this.T("display",b)},Ek:function(){return{visible:this.get("visible"),zIndex:this.get("zIndex"),Pc:this.get("zooms"),opacity:this.get("opacity"),H:this.get("container"),Ns:this.get("alwaysRender")}},o4:function(){return this.Qa.render},qj:function(a){if(f.L.Tm)return new f.L.Tm(this,a)}});f.L.Tm=f.L.Pd.extend({kg:function(){return this.q.get("container")},dc:function(a,b){if(this.q){var c=a.V.La;if(this.ja&&!this.q.Qa.jr){if(this.ja===c&&this.Md===a.V.zoom&&!this.j.Vq)return;if(!b.Ns&&(a.ve||a.Zd)){if(!f.f.Ee&&a.Zd){b.H.style.visibility="hidden";return}var c=Math.pow(2,a.V.zoom-this.Md),d=a.V.La.Oa(this.ja);d.x<-f.g.Ra/2&&(d.x+=f.g.Ra);d.x>f.g.Ra/2&&(d.x-=f.g.Ra);d=d.Rb(this.Jg);1!==c&&(b.H.style[f.f.Ee]="scale3d("+c+","+c+",1)");b.H.style.top=-d.y*c+"px";b.H.style.left=-d.x*c+"px"; return}}(d=this.q.o4())&&d.call(this.q.Qa,a);this.q.Ja||(this.q.Ja=!0,f.g.ec(function(){this.q&&(this.q.wd?this.q.da("renderComplete"):(this.q.wd=!0,this.q.da("complete")))},this));this.ja=c;this.Jg=a.V.M;this.Md=a.V.zoom;b.H.style.zIndex=b.zIndex;b.H.style[f.f.Ee]="";b.H.style.top="";b.H.style.left="";b.H.style.height="";b.H.style.visibility="";f.f.Gm(b.H,b.opacity)}}}); ')
_jsload_('cvector', 'f.L.canvas.gi=f.L.Ng.extend({C:function(a,b){arguments.callee.Ba.apply(this,arguments);var c=this;this.wJ=function(){c.set("display",0)};this.se();this.q.T("feature",this,!0)},Gda:function(a,b){return f.B.te(a,b.qo)||f.B.te(a,b.I5)},UD:function(){return this.Va.gG},se:function(){this.na=document.createElement("canvas");this.na.className="amap-vectors";this.fb=this.na.getContext("2d");this.Le=this.q.Oc?this.q.Sa:1;this.Va=new f.L.canvas.jd(this.na,this.wJ,this.Le)},Dba:function(a,b,c){var d=a.x;a= a.y;return[this.bF*d-b*this.Ld,this.bF*a-c*this.Ld,this.bF*(d+1)+b*this.Ld,this.bF*(a+1)+c*this.Ld]},Caa:function(){500<this.q.po.length&&this.qa.clear();if(!this.qa.It()&&0!==this.q.po.length)for(var a in this.q.po)if(this.q.po.hasOwnProperty(a)){var b=this.q.po[a];if(b.xa){var c=b.xa.oc(),d=[];this.qa.forEach(function(a,b){f.B.te(a[1],c)&&d.push(b)},this);for(b=0;b<d.length;b+=1)this.qa.remove(d[b])}}this.q.po=[]},dc:function(a,b){if(this.HQ||this.ja!==a.V.La||this.ja.zoom!==a.V.zoom||this.ja.rotation!== a.V.rotation||this.q.Li||this.j.Vq){var c=this.V=a.V,d=this.M=c.M,e=this.q;this.zoom=c.zoom;this.Wa=c.La;this.Sk=a.M;this.rotation=c.rotation;var g=a.V.la;this.ac=c.ac;c=this.Le;this.ja||(this.ja=this.Wa,this.ja.zoom=this.zoom,this.ja.rotation=this.rotation,this.Jg=this.M);if(this.q.Li||!a.ve&&!a.Zd||b.Ns&&!a.W){this.ja=this.Wa;this.ja.zoom=this.zoom;this.ja.rotation=this.rotation;this.Jg=this.M;this.q.Li=!1;this.Va.Le=c;this.Va.M=a.V.M/c;this.Va.Ld=a.V.Ld/c;this.Va.Sk=a.M;this.Va.Gc=[g.ub.x,g.ub.y]; var h=this.na;h.width=Math.round(2*g.tb.x)*c;h.height=Math.round(2*g.tb.y)*c;var h=this.q.xq||0,k=this.q.yq||0,c=Math.max(this.q.ye,h/this.M)+k,h=Math.max(this.q.ef,h/this.M)+k,g=[g.ub.x,g.ub.y,g.uc.x,g.uc.y];g[0]-=c*d;g[1]-=h*d;g[2]+=c*d;g[3]+=h*d;c=e.Dg(g);d=[[g[0],g[1]],[g[2],g[1]],[g[2],g[3]],[g[0],g[3]],[g[0],g[0]]];this.Va.fb.ex=0;this.Va.fb.nu=!1;if(this.q.Qa.Uh)e=this.q.get("style"),this.Va.EQ(c,e)||(this.HQ=!0);else{for(var l in c)c.hasOwnProperty(l)&&(c[l].get("visible")||delete c[l]);e= e.YD(c);l=e.length;this.HQ=!1;for(g=0;g<l;g+=1)this.Va.EQ(e[g][0],null,d)}this.hd(a)}else this.hd(a,b,!0)}},hd:function(){var a=Math.pow(2,this.zoom-this.ja.zoom),b=this.q.Oc?this.q.Sa:1;this.transform={translate:this.Wa.Oa(this.ja).Rb(this.Jg/b).add({x:this.na.width/2,y:this.na.height/2}),scale:a/b,rotate:0}},kg:function(){return this.na}});f.L.canvas.jd=f.Y.extend({C:function(a,b,c){this.na=a;this.qr=25*c;this.fb=a.getContext("2d");this.Xp=document.createElement("canvas");a=6*c;this.Xp.width=a;this.Xp.height=a;var d=this.Xp.getContext("2d");d.strokeStyle="#fff";d.lineWidth=2*c;d.moveTo(-1,a-1);d.lineTo(a/2,1);d.lineTo(a+1,a-1);d.stroke();this.Ha={};this.mp=b;this.Le=c},EQ:function(a,b,c){var d=!0,e;for(e in a)if(a.hasOwnProperty(e)){var g=a[e],h=g.name.split("-")[0];"circle"===h?this.k7(g,b||g.style):"point"===h?this.v7(g,b)||(d=!1): "polyline"===h?this.z7(g,b||g.style):"polygon"===h||"multipolygon"===h?this.w7(g,b||g.style,c):"text"===h&&this.Yca(g,b||g.style)}return d},k7:function(a,b){var c=this.fb,d=b.strokeColor,e=b.strokeWeight,g=b.strokeOpacity,h=b.fillColor,k=b.fillOpacity,l=b.strokeStyle,m=b.strokeDasharray,n,p=2*Math.PI,q,r;c.setLineDash&&c.setLineDash([]);c.save();h&&(c.fillStyle=h);d&&(e&&(c.lineWidth=e*this.Le),c.strokeStyle=d);e=a.xa;e instanceof f.fa.Ce&&(r=[e]);for(var e=0,u=r.length;e<u;e+=1){c.beginPath();q= r[e].Fa;q=this.Wd(q);var t=a.get("radius")/(this.Sk*Math.cos(Math.PI*a.get("center").Q/180))*this.Le;c.arc(q[0],q[1],t,0,p,!0);c.closePath();h&&k!==n&&(n=c.globalAlpha=k);c.fill();d&&(g!==n&&(n=c.globalAlpha=g),"dashed"===l?c.setLineDash?(c.setLineDash(m),c.stroke()):c.t2(q[0],q[1],t,m):c.stroke())}c.restore()},v7:function(a,b){b instanceof Array&&(b="number"===typeof a.Ta.style&&b[a.Ta.style]?b[a.Ta.style]:b[0]);var c=this.fb,d,e,g=0,h=0;d=this.Yn(b.url);if(!d)return!1;var k=b.size.width,l=b.size.height, g=b.anchor.x,h=b.anchor.y;e=this.Wd(a.xa.Fa);c.drawImage(d,Math.round(e[0]-g),Math.round(e[1]-h),k,l);return!0},k4:function(a,b,c){return[(b[0]-a[0])*c+a[0],(b[1]-a[1])*c+a[1]]},z7:function(a,b){var c=this.fb,d,e,g,h,k,l,m,n,p,q;n=[NaN,NaN,0];var r=[NaN,NaN],u=[NaN,NaN];c.globalAlpha=b.strokeOpacity;d=b.strokeStyle;e=b.strokeDasharray;c.lineCap=b.lineCap||"butt";c.lineJoin=b.lineJoin||"round";c.setLineDash&&c.setLineDash([]);c.save();c.beginPath();g=a.xa;g instanceof f.fa.jl?h=[g]:g instanceof f.fa.ur&& (h=g.ce);var t=b.showDir;g=[];k=0;for(l=h.length;k<l;k+=1){m=h[k].Fa;var v=[],w=0;p=0;for(q=m.length;p<q;p+=1)if(n=m[p],n=this.Wd(n),v.push(n),0===p)u[0]=n[0],u[1]=n[1],c.moveTo(n[0],n[1]);else if(r[0]=n[0],r[1]=n[1],p===m.length-1||3<=Math.abs(r[0]-u[0])||3<=Math.abs(r[1]-u[1])){if(t){var s=Math.sqrt(Math.pow(r[0]-u[0],2)+Math.pow(r[1]-u[1],2));if(s+w>this.qr){var y=0,y=u,z=r;if(z[0]===y[0])y=z[1]>y[1]?Math.PI:0;else if(z[1]===y[1])y=z[0]>y[0]?Math.PI/2:-Math.PI/2;else{var x=z[0]-y[0],z=z[1]-y[1], y=Math.atan(x/z);0<x&&0<z?y=Math.PI-y:0>x&&0>z?y=-y:0<x&&0>z?y=-y:0>x&&0<z&&(y=Math.PI-y)}for(x=this.qr-w;x<s;)z=this.k4(u,r,x/s),0<z[0]&&z[0]<this.na.width&&0<z[1]&&z[1]<this.na.height&&g.push(z[0],z[1],y),x+=this.qr;w=(s-(this.qr-w))%this.qr}else w+=s}"dashed"!==d||c.setLineDash?c.lineTo(n[0],n[1]):c.VC(u[0],u[1],n[0],n[1],e);u[0]=r[0];u[1]=r[1]}}"dashed"===d&&c.setLineDash&&c.setLineDash(e);b.isOutline&&(c.strokeStyle=b.outlineColor,c.lineWidth=(b.strokeWeight+2*b.borderWeight)*this.Le,c.stroke()); b.strokeColor&&(c.strokeStyle=b.strokeColor,c.lineWidth=b.strokeWeight*this.Le,c.stroke());c.restore();for(d=0;d<g.length;d+=3)c.save(),c.translate(g[d],g[d+1]),c.rotate(g[d+2]),c.drawImage(this.Xp,-this.Xp.width/2,-this.Xp.width/2),c.restore()},w7:function(a,b,c){var d=this.fb,e=b.strokeColor,g=b.strokeWeight,h=b.strokeOpacity,k=b.fillColor,l=b.fillOpacity,m=b.strokeStyle,n=b.strokeDasharray,p,q,r,u,t,v,w,s;q=[NaN,NaN,0];var y=[NaN,NaN],z=[NaN,NaN];d.setLineDash&&d.setLineDash([]);d.save();e&&(d.strokeStyle= e,g&&(d.lineWidth=g*this.Le),d.lineCap="butt",d.lineJoin=b.lineJoin||"miter");k&&(d.fillStyle=k);d.beginPath();this.hr={};b=0;q=a.xa;q instanceof f.fa.Rd?r=[q]:q instanceof f.fa.Uo&&(r=q.ce);a=0;for(g=r.length;a<g;a+=1)if(q=r[a],u=q.Jf,t=u.length,0<t)for(var x=0;x<t;x+=1){var B;v=u[x].Fa;2<v.length&&(v=f.vc.pQ(v,c));this.hr[b]=[];w=0;for(s=v.length;w<s;w+=1)if(q=v[w],q=this.Wd(q),this.hr[b].push(q),0===w)z[0]=NaN,z[1]=NaN,B=[q[0],q[1]],d.moveTo(q[0],q[1]);else if(y[0]=Math.round(q[0]),y[1]=Math.round(q[1]), y[0]!==z[0]||y[1]!==z[1])d.lineTo(q[0],q[1]),z[0]=y[0],z[1]=y[1];b+=1;B&&d.lineTo(B[0],B[1])}d.closePath();k&&(l!==p&&(p=d.globalAlpha=l),d.fill());if(e){h!==p&&(d.globalAlpha=h);if("dashed"===m)if(d.setLineDash)d.setLineDash(n);else{d.beginPath();for(var A in this.hr)if(this.hr.hasOwnProperty(A))for(k=this.hr[A],l=0,m=k.length;l<m;l+=1)p=l===m-1?0:l+1,c=Math.round(k[l][0]),e=Math.round(k[l][1]),h=Math.round(k[p][0]),p=Math.round(k[p][1]),d.VC(c,e,h,p,n)}d.stroke()}d.restore()},Yn:function(a){var b= this.Ha[a];if("undefined"===typeof b)b=document.createElement("img"),b.src=a,this.Ha[a]=b,b.loaded=!1,f.A.Am(b,"load",function(){b.loaded=!0;var a=document.createElement("canvas");a.width=b.naturalWidth;a.height=b.naturalHeight;a.getContext("2d").drawImage(b,0,0);b.canvas=a;this.mp&&this.mp()},this);else if(b.loaded)return b.canvas||b},Wd:function(a){var b=this.M;return[(a[0]-this.Gc[0])/b,(a[1]-this.Gc[1])/b]}}); ')
_cssload_('AMap.IndoorMap', '.amap-indoor-map .label-canvas{position:absolute;top:0;left:0}.amap-indoor-map .highlight-image-con *{pointer-events:none}.amap-indoormap-floorbar-control{position:absolute;margin:auto 0;bottom:165px;right:12px;width:35px;text-align:center;line-height:1.3em;overflow:hidden;padding:0 2px}.amap-indoormap-floorbar-control .panel-box{background-color:rgba(255,255,255,.9);border-radius:3px;border:1px solid #ccc}.amap-indoormap-floorbar-control .select-dock{position:absolute;top:0;left:0;width:100%;box-sizing:border-box;height:30px;border:solid #4196ff;border-width:0 2px;border-radius:2px;pointer-events:none;background:linear-gradient(to bottom,#f6f8f9 0,#e5ebee 50%,#d7dee3 51%,#f5f7f9 100%)}.amap-indoor-map .transition{transition:opacity .2s},.amap-indoormap-floorbar-control .transition{transition:top .2s,margin-top .2s}.amap-indoormap-floorbar-control .select-dock:after,.amap-indoormap-floorbar-control .select-dock:before{content:"";position:absolute;width:0;height:0;left:0;top:10px;border:solid transparent;border-width:4px;border-left-color:#4196ff}.amap-indoormap-floorbar-control .select-dock:after{right:0;left:auto;border-left-color:transparent;border-right-color:#4196ff}.amap-indoormap-floorbar-control.is-mobile{width:37px}.amap-indoormap-floorbar-control.is-mobile .floor-btn{height:35px;line-height:35px}.amap-indoormap-floorbar-control.is-mobile .select-dock{height:35px;top:36px}.amap-indoormap-floorbar-control.is-mobile .select-dock:after,.amap-indoormap-floorbar-control.is-mobile .select-dock:before{top:13px}.amap-indoormap-floorbar-control.is-mobile .floor-list-box{height:105px}.amap-indoormap-floorbar-control .floor-list-item .floor-btn{color:#555;font-family:"Times New Roman",sans-serif,"Microsoft Yahei";font-size:16px}.amap-indoormap-floorbar-control .floor-list-item.selected .floor-btn{color:#000}.amap-indoormap-floorbar-control .floor-btn{height:28px;line-height:28px;overflow:hidden;cursor:pointer;position:relative;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.amap-indoormap-floorbar-control .floor-btn:hover{background-color:rgba(221,221,221,.4)}.amap-indoormap-floorbar-control .floor-minus,.amap-indoormap-floorbar-control .floor-plus{position:relative;text-indent:-1000em}.amap-indoormap-floorbar-control .floor-minus:after,.amap-indoormap-floorbar-control .floor-plus:after{content:"";position:absolute;margin:auto;top:9px;left:0;right:0;width:0;height:0;border:solid transparent;border-width:10px 8px;border-top-color:#777}.amap-indoormap-floorbar-control .floor-minus.disabled,.amap-indoormap-floorbar-control .floor-plus.disabled{opacity:.3}.amap-indoormap-floorbar-control .floor-plus:after{border-bottom-color:#777;border-top-color:transparent;top:-3px}.amap-indoormap-floorbar-control .floor-list-box{max-height:153px;position:relative;overflow-y:hidden}.amap-indoormap-floorbar-control .floor-list{margin:0;padding:0;list-style:none}.amap-indoormap-floorbar-control .floor-list-item{position:relative}.amap-indoormap-floorbar-control .floor-btn.disabled,.amap-indoormap-floorbar-control .floor-btn.disabled *,.amap-indoormap-floorbar-control.with-indrm-loader *{-webkit-pointer-events:none!important;pointer-events:none!important}.amap-indoormap-floorbar-control .with-indrm-loader .floor-nonas{opacity:.5}.amap-indoor-map-moverf-marker{color:#555;background-color:#FFFEEF;border:1px solid #7E7E7E;padding:3px 6px;font-size:12px;white-space:nowrap;display:inline-block;position:absolute;top:1em;left:1.2em}.amap-indoormap-floorbar-control .amap-indrm-loader{-moz-animation:amap-indrm-loader 1250ms infinite linear;-webkit-animation:amap-indrm-loader 1250ms infinite linear;animation:amap-indrm-loader 1250ms infinite linear;border:2px solid #91A3D8;border-right-color:transparent;box-sizing:border-box;display:inline-block;overflow:hidden;text-indent:-9999px;width:13px;height:13px;border-radius:7px;position:absolute;margin:auto;top:0;left:0;right:0;bottom:0}@-moz-keyframes amap-indrm-loader{0%{-moz-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes amap-indrm-loader{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes amap-indrm-loader{0%{-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-webkit-transform:rotate(360deg);transform:rotate(360deg)}}')
_jsload_('AMap.IndoorMap', 'f.LS=f.Y.extend({ia:[f.ga],C:function(a){this.Yo=f.extend({size:120,vR:0.7,AN:2,uR:300},a);this.tg={};this.ck=0;this.Fz=this.Yo.size},FT:function(a){return{Om:a,oC:f.g.Sh(),Fw:0}},get:function(a,b){if(!this.Mc(a))return b;var c=this.tg[a];c.oC=f.g.Sh();c.Fw+=1;return c.Om},forEach:function(a,b){for(var c in this.tg)if(this.tg.hasOwnProperty(c)&&!1===a.call(b,this.tg[c].Om,c))break},Wk:function(a,b){return this.get(a,b)},set:function(a,b){this.Mc(a)?this.tg[a].Om=b:(this.ck+=1,this.tg[a]=this.FT(b)); this.ck>this.Fz&&this.HT()},Mc:function(a){return this.tg.hasOwnProperty(a)},hl:function(a){if(!this.Mc(a))return null;this.ck-=1;var b=this.tg[a];delete this.tg[a];return b.Om},clear:function(){this.Az();this.tg={};this.ck=0},Az:function(){this.Gz&&clearTimeout(this.Gz)},HT:function(){if(this.ck>this.Fz*this.Yo.AN)this.Az(),this.GH();else if(!(10>f.g.Sh()-this.JT)){this.Az();var a=this;this.Gz=setTimeout(function(){a.Gz=null;a.GH()},this.Yo.uR);this.JT=f.g.Sh()}},GH:function(){var a=Math.round(this.Fz* this.Yo.vR);if(!(this.ck<a))for(var a=this.BT(this.ck-a),b,c,d=0,e=a.length;d<e;d+=1)b=a[d],c=this.hl(b),this.w("drop",{key:b,Om:c})},xT:function(a,b){var c=this.tg[a],d=this.tg[b],e=c.oC-d.oC;return 0!==e?e:c.Fw-d.Fw},BT:function(a){var b=[],c;for(c in this.tg)this.tg.hasOwnProperty(c)&&b.push(c);return this.CT(b,a,this.xT)},CT:function(a,b,c){if(0>=b)return[];for(var d=0,e=a.length-1,g,h,k;d<e;){g=d;h=e;for(k=a[b];g<=b&&h>=b;){for(;g<=b&&0>c.call(this,a[g],k);)g+=1;for(;h>=b&&0<c.call(this,a[h], k);)h-=1;var l=a[g];a[g]=a[h];a[h]=l;g+=1;h-=1}h<b&&(d=g);g>b&&(e=h)}return a.slice(0,b)}});f.To={YC:function(a){f.f.za(a,"transition")},SE:"function"!==typeof Object.create?function(){function a(){}return function(b){a.prototype=b;b=new a;a.prototype=null;return b}}():Object.create,uM:function(a,b){var c=this.m0;c||(c=this.m0=this.gW());if(!1!==c){this.YC(a);var d,e=this,g=function k(){clearTimeout(d);e.YC(a);f.A.D(a,c,k,e)};d=setTimeout(g,b||1E3);f.f.ta(a,"transition");f.A.Am(a,c,g,this)}},gW:function(){var a,b=document.createElement("fakeelement"),c={transition:"transitionend",OTransition:"oTransitionEnd", MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(a in c)if(void 0!==b.style[a])return c[a];return!1}};(function(){var a="strokeColor strokeOpacity strokeWeight fillColor fillOpacity strokeStyle strokeDasharray fontSize".split(" "),b=f.Y.extend({C:function(){this.ZT=1;this.XB={};this.EU(c);this.fK=[]},TO:function(a){for(var b=!0,c=13;22>=c;c++){var h=this.fO(a,c);if(h&&(0<h.fontSize||h.ee)){b=!1;break}}return b},fO:function(a,b){return this.BA(a,b)},n4:function(a,b){return this.BA(a,b)},g4:function(a,b){return this.BA(a,b)},j2:function(b,c){if(c)for(var g in c)c.hasOwnProperty(g)&&0<=a.indexOf(g)&& void 0===b[g]&&(b[g]=c[g]);return b},lx:function(b,c){if(!b)return null;for(var g={},h=0,k=a.length;h<k;h++){var l=a[h];b.hasOwnProperty(l)&&void 0!==b[l]&&(g[l]=b[l])}this.j2(g,c);return g},waa:function(a,b){return void 0===a?b:this.MD(a?this.lx(a,b):null)},HM:function(a){if(!a)return null;a=this.lx(a);return f.extend(a,{xi:this.r4(a)})},BA:function(a,b){var c=a[0]+"_"+a[1];b=Math.round(b);var h=this.XB[c];if(!h)return 0>this.fK.indexOf(c)&&this.fK.push(c),null;for(var c=0,k=h.length;c<k;c++)if(0<= h[c].vq.indexOf(""+b))return h[c].dG;return 20<b&&(h=h[h.length-1],0<=h.vq.indexOf("20"))?(h.vq.push(""+b),h.dG):null},EU:function(a){for(var b in a)a.hasOwnProperty(b)&&this.FU(a[b],b)},FU:function(a,b){for(var c=0,h=a.length;c<h;c++)this.BU(a[c],b)},BU:function(a,b){var c=a.$;if(c){var h=a.StyleItem,c=c.mainkey+"_"+c.subkey;this.XB[c]&&console.error("Style key duplicate",c);this.XB[c]=this.DU(h,b)}else console.warn("Missing group $",a)},DU:function(a,b){for(var c=[],h=0,k=a.length;h<k;h++){var l= this.CU(a[h],b);l&&c.push(l)}return c},CU:function(a,b){var c=a.$;if(c){var h={};h.vq=c.level.split(",");h.G2=c.desc.split(",");h.dG=this.AU(h,h.G2,b);h.dG.vq=h.vq;return h}console.warn("Missing $",a)},xp:function(a){a.trim&&(a=a.trim());return f.g.$f(a.substr(2,8))},oO:function(){return this.ZT++},r4:function(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(c);b.sort();for(var h=[],k=0,l=b.length;k<l;k++)h.push(b[k]+":"+a[c]);return h.join(";")||"empty"},yP:function(a,b){return a?b?f.extend({}, a,b,{xi:b.xi+";"+a.xi}):a:b},MD:function(a){return f.extend({},a,{xi:this.oO()})},AU:function(a,b,c){switch(c){case "PoiStyle":a={ee:parseInt(b[1],10),fontSize:Math.min(15,parseInt(b[4],10)||0),fillColor:this.xp(b[5]),strokeColor:this.xp(b[6]),jI:0===parseInt(b[8],10)};1===a.ee&&(a.ee=0);break;case "LineStyle":a={fillColor:"rgba(252,249,242,1)",strokeColor:this.xp(b[7]),strokeWeight:Math.max(2,Math.round(parseInt(b[2],10)/3))};break;case "RegionStyle":a={fillColor:this.xp(b[2])};break;case "BuildingStyle":a= {fillColor:this.xp(b[1]),strokeColor:this.xp(b[2])};break;default:return console.warn("Unknown style type",c),null}a.xi=this.oO();return a}}),c={PoiStyle:[{$:{mainkey:"10001",subkey:"1"},StyleItem:[{$:{level:"18,19,20",desc:"50,2,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"2"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,7,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"3"},StyleItem:[{$:{level:"19,20",desc:"50,8,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001", subkey:"4"},StyleItem:[{$:{level:"18",desc:"50,25,2,1,0,0xff84638E,0xffffffff,0x0,0"}},{$:{level:"19,20",desc:"50,25,1,1,12,0xff84638E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"5"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,59,2,1,0,0xff84638E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"6"},StyleItem:[{$:{level:"18,19,20",desc:"50,3,1,1,12,0xff84638E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"7"},StyleItem:[{$:{level:"18,19,20",desc:"50,4,1,1,12,0xff816B4E,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"8"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,9,1,1,12,0xff935676,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"9"},StyleItem:[{$:{level:"18,19,20",desc:"50,10,1,1,12,0xff935676,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"10"},StyleItem:[{$:{level:"18,19,20",desc:"50,14,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"11"},StyleItem:[{$:{level:"18,19,20",desc:"50,15,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"12"}, StyleItem:[{$:{level:"18,19,20",desc:"50,17,1,1,12,0xff816B4E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"13"},StyleItem:[{$:{level:"18,19,20",desc:"50,18,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"14"},StyleItem:[{$:{level:"18,19,20",desc:"50,19,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"15"},StyleItem:[{$:{level:"18,19,20",desc:"50,22,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"16"},StyleItem:[{$:{level:"20",desc:"50,24,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"17"},StyleItem:[{$:{level:"19,20",desc:"50,1,0,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"18"},StyleItem:[{$:{level:"18,19,20",desc:"50,27,1,1,12,0xff84638E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"19"},StyleItem:[{$:{level:"18,19,20",desc:"50,36,1,1,12,0xff8E3A3D,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"20"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,39,1,1,12,0xff935676,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"21"},StyleItem:[{$:{level:"18,19", desc:"50,44,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,44,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"22"},StyleItem:[{$:{level:"18,19",desc:"50,45,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,45,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"23"},StyleItem:[{$:{level:"18,19",desc:"50,46,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,46,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"24"}, StyleItem:[{$:{level:"18,19",desc:"50,47,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,47,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"25"},StyleItem:[{$:{level:"18,19",desc:"50,48,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,48,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"26"},StyleItem:[{$:{level:"18,19",desc:"50,49,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,49,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"27"},StyleItem:[{$:{level:"18,19",desc:"50,50,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,50,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"28"},StyleItem:[{$:{level:"18,19",desc:"50,51,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,51,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"29"},StyleItem:[{$:{level:"18,19",desc:"50,52,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,52,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"30"},StyleItem:[{$:{level:"18,19",desc:"50,53,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,53,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"31"},StyleItem:[{$:{level:"18,19",desc:"50,54,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,54,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"32"},StyleItem:[{$:{level:"18,19",desc:"50,55,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,55,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"33"},StyleItem:[{$:{level:"18,19",desc:"50,56,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,56,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"34"},StyleItem:[{$:{level:"18,19",desc:"50,57,2,1,0,0xff696F71,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,57,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"35"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,6,2,1,0,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"36"}, StyleItem:[{$:{level:"18,19,20",desc:"50,12,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"37"},StyleItem:[{$:{level:"19,20",desc:"50,13,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"38"},StyleItem:[{$:{level:"18,19,20",desc:"50,16,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"39"},StyleItem:[{$:{level:"17",desc:"50,20,2,1,0,0xff69859F,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,20,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001", subkey:"40"},StyleItem:[{$:{level:"17",desc:"50,5,2,1,0,0xff69859F,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,5,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"41"},StyleItem:[{$:{level:"20",desc:"50,28,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"42"},StyleItem:[{$:{level:"18,19,20",desc:"50,29,1,1,12,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"43"},StyleItem:[{$:{level:"18,19,20",desc:"50,31,1,1,12,0xff000000,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"44"},StyleItem:[{$:{level:"18,19,20",desc:"50,32,2,1,0,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"45"},StyleItem:[{$:{level:"18,19,20",desc:"50,33,2,1,0,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"46"},StyleItem:[{$:{level:"18",desc:"50,34,2,1,0,0xff935676,0xffffffff,0x0,0"}},{$:{level:"19,20",desc:"50,34,1,1,12,0xff935676,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"47"},StyleItem:[{$:{level:"18,19,20",desc:"50,35,2,1,0,0xff4C6776,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"48"},StyleItem:[{$:{level:"19,20",desc:"50,37,1,1,12,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"49"},StyleItem:[{$:{level:"18,19,20",desc:"50,38,2,1,0,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"50"},StyleItem:[{$:{level:"18,19,20",desc:"50,42,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"51"},StyleItem:[{$:{level:"18,19,20",desc:"50,41,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"52"},StyleItem:[{$:{level:"20", desc:"50,43,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"53"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,58,2,1,0,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"54"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,21,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"55"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,30,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"56"},StyleItem:[{$:{level:"19,20",desc:"50,1,0,1,12,0xff000000,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"57"},StyleItem:[{$:{level:"18,19,20",desc:"50,23,2,1,0,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"58"},StyleItem:[{$:{level:"18,19,20",desc:"50,40,2,1,0,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"59"},StyleItem:[{$:{level:"18,19,20",desc:"50,11,2,1,0,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"60"},StyleItem:[{$:{level:"16,17",desc:"50,1,0,1,20,0xff6590a6,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"62"},StyleItem:[{$:{level:"17,18,19,20", desc:"50,61,2,1,0,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"63"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,60,2,1,0,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"64"},StyleItem:[{$:{level:"17",desc:"50,62,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,62,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"65"},StyleItem:[{$:{level:"17",desc:"50,63,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,63,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"66"},StyleItem:[{$:{level:"17",desc:"50,64,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,64,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"67"},StyleItem:[{$:{level:"17",desc:"50,65,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,65,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"68"},StyleItem:[{$:{level:"17",desc:"50,66,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,66,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"69"},StyleItem:[{$:{level:"17",desc:"50,67,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,67,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"70"},StyleItem:[{$:{level:"17",desc:"50,68,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,68,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"71"},StyleItem:[{$:{level:"17",desc:"50,69,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,69,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"72"},StyleItem:[{$:{level:"17",desc:"50,70,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,70,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"73"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,71,2,1,0,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"74"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,72,2,1,0,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"75"},StyleItem:[{$:{level:"18,19",desc:"50,73,2,1,0,0xff62686B,0xffffffff,0x0,0"}}, {$:{level:"20",desc:"50,73,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"76"},StyleItem:[{$:{level:"18,19",desc:"50,74,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,74,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"77"},StyleItem:[{$:{level:"18,19",desc:"50,75,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,75,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"78"},StyleItem:[{$:{level:"18,19",desc:"50,76,2,1,0,0xff62686B,0xffffffff,0x0,0"}}, {$:{level:"20",desc:"50,76,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"79"},StyleItem:[{$:{level:"19,20",desc:"50,81,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"80"},StyleItem:[{$:{level:"19,20",desc:"50,89,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"81"},StyleItem:[{$:{level:"19,20",desc:"50,85,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"82"},StyleItem:[{$:{level:"19,20",desc:"50,90,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"83"},StyleItem:[{$:{level:"19,20",desc:"50,83,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"84"},StyleItem:[{$:{level:"19,20",desc:"50,103,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"85"},StyleItem:[{$:{level:"19,20",desc:"50,98,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"86"},StyleItem:[{$:{level:"19,20",desc:"50,86,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"87"},StyleItem:[{$:{level:"19,20", desc:"50,87,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"88"},StyleItem:[{$:{level:"19,20",desc:"50,111,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"89"},StyleItem:[{$:{level:"19,20",desc:"50,88,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"90"},StyleItem:[{$:{level:"19,20",desc:"50,91,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"91"},StyleItem:[{$:{level:"19,20",desc:"50,93,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"92"},StyleItem:[{$:{level:"19,20",desc:"50,113,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"93"},StyleItem:[{$:{level:"19,20",desc:"50,95,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"94"},StyleItem:[{$:{level:"19,20",desc:"50,100,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"95"},StyleItem:[{$:{level:"19,20",desc:"50,97,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"96"},StyleItem:[{$:{level:"19,20", desc:"50,94,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"97"},StyleItem:[{$:{level:"18,19,20",desc:"50,108,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"98"},StyleItem:[{$:{level:"18,19,20",desc:"50,1,2,1,0,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"99"},StyleItem:[{$:{level:"18,19,20",desc:"50,1,0,1,12,0xff696F71,0xffffffff,0x0,1"}}]},{$:{mainkey:"10001",subkey:"105"},StyleItem:[{$:{level:"16,17,18",desc:"50,1,0,1,14,0xff696F71,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"106"},StyleItem:[{$:{level:"19,20",desc:"50,1,0,1,12,0xff4d4e51,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"107"},StyleItem:[{$:{level:"16,17,18,19,20",desc:"50,109,1,1,12,0xff4d4e51,0xffffffff,0x0,0"}}]}],LineStyle:[{$:{mainkey:"20001",subkey:"1"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"88,2,10,0,0,0,0xffe68e00,0xffe68e00,0xffe68e00,0xffe68e00"}}]},{$:{mainkey:"20001",subkey:"2"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"88,2,8,0,0,0,0xffababab,0xffababab,0xff5e492f,0xffffe080"}}]}], RegionStyle:[{$:{mainkey:"30001",subkey:"1"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"90,1,0xfffcfbed"}}]},{$:{mainkey:"30001",subkey:"99"},StyleItem:[{$:{level:"19,20",desc:"90,1,0x1a151b2b"}}]},{$:{mainkey:"30001",subkey:"98"},StyleItem:[{$:{level:"19,20",desc:"90,1,0x8c151b2b"}}]}],BuildingStyle:[{$:{mainkey:"30001",subkey:"2"},StyleItem:[{$:{level:"17,18,19,20",desc:"99,0xffe6e6e6,0xff858585,0xffcfcfcf,0xffb8b8b8,255"}}]},{$:{mainkey:"30001",subkey:"3"},StyleItem:[{$:{level:"15,16,17,18,19,20", desc:"99,0xffe6e6e6,0xff858585,0xffcfcfcf,0xffb8b8b8,255"}}]},{$:{mainkey:"30001",subkey:"4"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffbfd6e9 ,0xff6f7c87,0xffacc0d1,0xff99abba,255"}}]},{$:{mainkey:"30001",subkey:"5"},StyleItem:[{$:{level:"17,18,19,20",desc:"99,0xffcce3e8 ,0xff778487,0xffb7ccd0,0xffa3b6ba,255"}}]},{$:{mainkey:"30001",subkey:"6"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffcce3e8,0xff778487,0xffb7ccd0,0xffa3b6ba,255"}}]},{$:{mainkey:"30001",subkey:"7"},StyleItem:[{$:{level:"15,16,17,18,19,20", desc:"99,0xffe5dae8,0xff857f87,0xffcec4d0,0xffb7aeba,255"}}]},{$:{mainkey:"30001",subkey:"8"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xfffaeccd,0xff948c79,0xffe1d4b8,0xffc8bda4,255"}}]},{$:{mainkey:"30001",subkey:"9"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xff90bae8,0xff546d87,0xff81a7d0,0xff7395ba,255"}}]},{$:{mainkey:"30001",subkey:"10"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xfff0e3df,0xff8f8d8c,0xffd8ccc8,0xffc0b6b2,255"}}]},{$:{mainkey:"30001",subkey:"11"}, StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffbfd3e9,0xff6f7b87,0xffacbdd1,0xff99a9ba,255"}}]},{$:{mainkey:"30001",subkey:"12"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffdae2f4,0xff7f848f,0xffc4cbdb,0xffaeb5c3,255"}}]},{$:{mainkey:"30001",subkey:"13"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xff95e3f5,0xff598791,0xff86ccdc,0xff77b6c4,255"}}]},{$:{mainkey:"30001",subkey:"14"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffc9edf5,0xff778d91,0xffb5d5dc,0xffa1bec4,255"}}]}, {$:{mainkey:"30001",subkey:"15"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xfff4c4ba,0xff8f726d,0xffdbb0a7,0xffc39d95,255"}}]},{$:{mainkey:"30001",subkey:"16"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffdbe8b3,0xff7f8768,0xffc5d0a1,0xffafba8f,255"}}]},{$:{mainkey:"30001",subkey:"17"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xfff5cedc,0xff917a82,0xffdcb9c6,0xffc4a5b0,255"}}]}]};f.fz=new b;c=null})();(function(){function a(a){function c(a,b,c){a=a.subarray(b,c);b=0;c="";var d=0;for(b=d=0;b<a.length;)d=a[b],0===d>>>7?(d=String.fromCharCode(a[b]),"0"!==d.charCodeAt(0).toString(16)&&(c+=d),b+=1):252===(d&252)?(d=(a[b]&3)<<30,d|=(a[b+1]&63)<<24,d|=(a[b+2]&63)<<18,d|=(a[b+3]&63)<<12,d|=(a[b+4]&63)<<6,d|=a[b+5]&63,c+=String.fromCharCode(d),b+=6):248===(d&248)?(d=(a[b]&7)<<24,d|=(a[b+1]&63)<<18,d|=(a[b+2]&63)<<12,d|=(a[b+3]&63)<<6,d|=a[b+4]&63,c+=String.fromCharCode(d),b+=5):240===(d&240)?(d=(a[b]&15)<< 18,d|=(a[b+1]&63)<<12,d|=(a[b+2]&63)<<6,d|=a[b+3]&63,c+=String.fromCharCode(d),b+=4):224===(d&224)?(d=(a[b]&31)<<12,d|=(a[b+1]&63)<<6,d|=a[b+2]&63,c+=String.fromCharCode(d),b+=3):192===(d&192)?(d=(a[b]&63)<<6,d|=a[b+1]&63,c+=String.fromCharCode(d),b+=2):(d=String.fromCharCode(a[b]),"0"!==d.charCodeAt(0).toString(16)&&(c+=d),b+=1);return c.trim()}function d(a,b){a=a.toString(2);b=b.toString(2);a=Array(32-a.length+1).join("0")+a;b=Array(32-b.length+1).join("0")+b;var c=k;c.lastIndex=0;if(c=(b+a).toString().match(c)){var d= 0;-1===c[0].indexOf(".")&&(d=parseInt(c,2));return d=d.toString(36).toUpperCase()}return"error"}function e(a){for(var b,e,g,k,r,u={},t={},v=new Uint8Array(a),w=new DataView(a),s=0,s=s+4,s=s+4,y=w.getInt32(s,!0),s=s+4,s=s+4,z=w.getInt32(s,!0),s=s+(4+z),s=s+4,x=w.getUint32(s,!0).toString(2),B=w.getUint32(s+4,!0).toString(2),A=d(x,B),s=s+8,L=c(v,s,s+64),s=s+64,R=c(v,s,s+64),s=s+64,Q=w.getInt8(s,!0),s=s+1,S=c(v,s,s+8),s=s+8,C=w.getInt16(s,!0),E=w.getInt16(s+2,!0),s=s+4,H=w.getFloat32(s,!0),F=w.getFloat32(s+ 4,!0),s=s+8,I=w.getFloat32(s,!0),V=w.getFloat32(s+4,!0),s=s+8,J=w.getFloat32(s,!0),T=w.getFloat32(s+4,!0),s=s+8,O=w.getInt32(s,!0),s=s+4,P=w.getInt32(s,!0),s=s+4,M=w.getInt32(s,!0),s=s+4,ca=[],Y=0;Y<O;Y++)ca.push(w.getInt32(s,!0)),s+=4;for(var da=[],Y=0;Y<M;Y++)da.push(w.getInt32(s,!0)),s+=4;for(var aa=[],Y=0;Y<O;Y++){var U=c(v,s,s+48);aa.push(U);s+=48}for(var Z=[],Y=0;Y<O;Y++){var N=c(v,s,s+8);Z.push(N);s+=8}for(var D=[],Y=0;Y<P;Y++){var K=w.getInt32(s,!0)*h+F,G=w.getInt32(s+4,!0)*h+H;D.push([K, G]);s+=8}b={type:"Feature",geometry:{type:"Polygon",coordinates:[D]},properties:{pid:A,name_cn:L,name_en:R,default_floor:Q,buildingtype:S,building_poi_style:[C,E],centerPoint:[F,H],left_bottom_Point:[I,V],width:J,height:T,numberofFloor:O,numberofGeoPoints:P,park_floor_count:M,floor_indexs:ca,park_floors:da,floor_names:aa,floor_nonas:Z}};for(var X=0;X<y;X++){var $=c(v,s,s+8),s=s+8,ea=w.getInt8(s,!0),s=s+1;t[ea]={floor:{},shops:[],pubs:[],cons:[]};for(var ia=w.getInt16(s,!0),hd=w.getInt16(s+2,!0),s= s+4,id=w.getInt16(s,!0),jd=w.getInt16(s+2,!0),s=s+4,kd=w.getInt16(s,!0),ld=w.getInt16(s+2,!0),s=s+4,ec=w.getInt32(s,!0),s=s+4,fc=w.getInt32(s,!0),s=s+4,gc=w.getInt32(s,!0),s=s+4,xb=w.getInt32(s,!0),s=s+4,yb=[],Oa=0;Oa<xb;Oa++){for(var md=w.getInt32(s,!0),s=s+4,hc=[],ja=0;ja<md;ja++)K=w.getInt32(s,!0)*h+F,G=w.getInt32(s+4,!0)*h+H,hc.push([K,G]),s+=8;yb.push(hc)}var ic="Polygon",jc=yb[0];1<xb&&(ic="MultiPolygon",jc=yb);e={type:"Feature",geometry:{type:ic,coordinates:[jc]},properties:{namecode:$,index:ea, floor_region_type:[ia,hd],unhighlighted_floor_line_style:[id,jd],highlighted_floor_line_style:[kd,ld],numberofShopCount:ec,numberofPubCount:fc,numberofConCount:gc,floor_area_count:xb}};t[ea].floor=e;for(var kc=[],va=0,va=0;va<ec;va++){for(var nd=c(v,s,s+128),s=s+128,od=w.getUint32(s,!0).toString(2),pd=w.getUint32(s+4,!0).toString(2),qd=d(od,pd),s=s+8,rd=c(v,s,s+24),s=s+24,sd=c(v,s,s+12),s=s+12,td=w.getInt32(s,!0),s=s+4,ud=w.getFloat32(s,!0),s=s+4,vd=w.getInt8(s,!0),s=s+1,wd=w.getInt16(s,!0),xd=w.getInt16(s+ 2,!0),s=s+4,yd=w.getInt16(s,!0),zd=w.getInt16(s+2,!0),s=s+4,Ad=w.getInt32(s,!0)*h+F,Bd=w.getInt32(s+4,!0)*h+H,s=s+8,lc=w.getInt32(s,!0),s=s+4,mc=[],Oa=0;Oa<lc;Oa++)K=w.getInt32(s,!0)*h+F,G=w.getInt32(s+4,!0)*h+H,mc.push([K,G]),s+=8;g={type:"Feature",geometry:{type:"Polygon",coordinates:[mc]},properties:{name:nd,pid:qd,cpid:rd,logo:sd,area:td,rank:ud,height:vd,poitype:[wd,xd],regiontype:[yd,zd],font_anthor_point:[Ad,Bd],shop_point_number:lc}};kc.push(g)}t[ea].Ey=kc;for(var nc=[],va=va=0;va<fc;va++){var Cd= c(v,s,s+24),s=s+24,Dd=w.getUint32(s,!0).toString(2),Ed=w.getUint32(s+4,!0).toString(2),Fd=d(Dd,Ed),s=s+8,Gd=c(v,s,s+48),s=s+48,Hd=w.getFloat32(s,!0),s=s+4,Id=w.getInt16(s,!0),Jd=w.getInt16(s+2,!0),s=s+4,K=w.getInt32(s,!0)*h+F,G=w.getInt32(s+4,!0)*h+H,s=s+8;r={type:"Feature",geometry:{type:"Point",coordinates:[K,G]},properties:{cpid:Cd,pid:Fd,name:Gd,rank:Hd,poitype:[Id,Jd]}};nc.push(r)}t[ea].fy=nc;for(var oc=[],va=0;va<gc;va++){var Kd=c(v,s,s+24),s=s+24,Ld=w.getUint32(s,!0).toString(2),Md=w.getUint32(s+ 4,!0).toString(2),Nd=d(Ld,Md),s=s+8,Od=c(v,s,s+48),s=s+48,Pd=w.getFloat32(s,!0),s=s+4,Qd=w.getInt16(s,!0),Rd=w.getInt16(s+2,!0),s=s+4,K=w.getInt32(s,!0)*h+F,G=w.getInt32(s+4,!0)*h+H,s=s+8;k={type:"Feature",geometry:{type:"Point",coordinates:[K,G]},properties:{cpid:Kd,pid:Nd,name:Od,rank:Pd,poitype:[Qd,Rd]}};oc.push(k)}t[ea].Yw=oc}for(var s=s+4,Sd=w.getInt32(s,!0),s=s+(4+Sd),Td=w.getInt32(s,!0),s=s+4,pc=[],Y=0;Y<Td;Y++)K=w.getInt32(s,!0)*h+F,G=w.getInt32(s+4,!0)*h+H,pc.push([K,G]),s+=8;b.properties.outside_outline= pc;var Pa={},ma;for(ma in t)if(t.hasOwnProperty(ma)){Pa.floor=t[ma].floor;for(ja=0;ja<t[ma].Ey.length;ja++){var Ud=w.getInt16(s,!0),s=s+2,Vd=w.getInt16(s,!0),s=s+2;t[ma].Ey[ja].properties.zoom_min=Ud;t[ma].Ey[ja].properties.zoom_max=Vd}Pa.shops=t[ma].Ey;for(ja=0;ja<t[ma].fy.length;ja++){var Wd=w.getInt16(s,!0),s=s+2,Xd=w.getInt16(s,!0),s=s+2;t[ma].fy[ja].properties.zoom_min=Wd;t[ma].fy[ja].properties.zoom_max=Xd}Pa.pubs=t[ma].fy;for(ja=0;ja<t[ma].Yw.length;ja++){var Yd=w.getInt16(s,!0),s=s+2,Zd=w.getInt16(s, !0),s=s+2;t[ma].Yw[ja].properties.zoom_min=Yd;t[ma].Yw[ja].properties.zoom_max=Zd}Pa.cons=t[ma].Yw;u.floor=Pa}var s=s+4,$d=w.getInt32(s,!0),s=s+(4+$d),ae=w.getInt8(s,!0),s=s+1;b.properties.xaa=ae;u.building=b;return u}var g=g||{};g.Zj=function(){this.Gl=0};g.Zj.prototype.create=function(a){this.ap&&this.Gl===a||(this.ap=[]);this.Gl=a;this.ow=this.Uf=0};g.Zj.prototype.flush=function(){var a=this.Uf-this.ow;if(0!==a){for(;a--;)this.Dl.b$(this.ap[this.ow++]);this.Uf>=this.Gl&&(this.Uf=0);this.ow=this.Uf}}; g.Zj.prototype.ly=function(){this.flush();this.Dl=null};g.Zj.prototype.VF=function(a){this.ly();this.Dl=a};g.Zj.prototype.Ne=function(a){a||(this.Uf=this.ow=0)};g.Zj.prototype.i2=function(a,b){var c=this.Uf-a-1;for(0>c&&(c+=this.Gl);b--;)c>=this.Gl&&(c=0),this.ap[this.Uf++]=this.ap[c++],this.Uf>=this.Gl&&this.flush()};g.Zj.prototype.V6=function(a){this.ap[this.Uf++]=a;this.Uf>=this.Gl&&this.flush()};g.Zj.prototype.MN=function(a){a=this.Uf-a-1;0>a&&(a+=this.Gl);return this.ap[a]};g.Wo=function(){}; g.Wo.prototype.VF=function(a){this.Dl=a};g.Wo.prototype.ly=function(){this.Dl=null};g.Wo.prototype.Ne=function(){var a=5;this.ug=0;for(this.Xe=-1;a--;)this.ug=this.ug<<8|this.Dl.ff()};g.Wo.prototype.y2=function(a){for(var b=0,c;a--;)this.Xe>>>=1,c=this.ug-this.Xe>>>31,this.ug-=this.Xe&c-1,b=b<<1|1-c,0===(this.Xe&4278190080)&&(this.ug=this.ug<<8|this.Dl.ff(),this.Xe<<=8);return b};g.Wo.prototype.Cg=function(a,b){var c=a[b],d=(this.Xe>>>11)*c;if((this.ug^2147483648)<(d^2147483648))return this.Xe=d, a[b]+=2048-c>>>5,0===(this.Xe&4278190080)&&(this.ug=this.ug<<8|this.Dl.ff(),this.Xe<<=8),0;this.Xe-=d;this.ug-=d;a[b]-=c>>>5;0===(this.Xe&4278190080)&&(this.ug=this.ug<<8|this.Dl.ff(),this.Xe<<=8);return 1};g.Ij=function(a,b){for(;b--;)a[b]=1024};g.fi=function(a){this.fB=[];this.Sv=a};g.fi.prototype.Ne=function(){g.Ij(this.fB,1<<this.Sv)};g.fi.prototype.Bg=function(a){for(var b=1,c=this.Sv;c--;)b=b<<1|a.Cg(this.fB,b);return b-(1<<this.Sv)};g.fi.prototype.J7=function(a){for(var b=1,c=0,d=0,e;d<this.Sv;++d)e= a.Cg(this.fB,b),b=b<<1|e,c|=e<<d;return c};g.K7=function(a,b,c,d){for(var e=1,g=0,h=0,k;h<d;++h)k=c.Cg(a,b+e),e=e<<1|k,g|=k<<h;return g};g.tr=function(){this.Vz=[];this.bB=[];this.eB=[];this.rJ=new g.fi(8);this.ms=0};g.tr.prototype.create=function(a){for(;this.ms<a;++this.ms)this.bB[this.ms]=new g.fi(3),this.eB[this.ms]=new g.fi(3)};g.tr.prototype.Ne=function(){var a=this.ms;for(g.Ij(this.Vz,2);a--;)this.bB[a].Ne(),this.eB[a].Ne();this.rJ.Ne()};g.tr.prototype.Bg=function(a,b){return 0===a.Cg(this.Vz, 0)?this.bB[b].Bg(a):0===a.Cg(this.Vz,1)?8+this.eB[b].Bg(a):16+this.rJ.Bg(a)};g.Lu=function(){this.nv=[]};g.Lu.prototype.Ne=function(){g.Ij(this.nv,768)};g.Lu.prototype.A2=function(a){var b=1;do b=b<<1|a.Cg(this.nv,b);while(256>b);return b&255};g.Lu.prototype.B2=function(a,b){var c=1,d,e;do if(d=b>>7&1,b<<=1,e=a.Cg(this.nv,(1+d<<8)+c),c=c<<1|e,d!==e){for(;256>c;)c=c<<1|a.Cg(this.nv,c);break}while(256>c);return c&255};g.Pu=function(){};g.Pu.prototype.create=function(a,b){var c;if(!this.ev||this.ns!== b||this.lB!==a)for(this.lB=a,this.$Z=(1<<a)-1,this.ns=b,this.ev=[],c=1<<this.ns+this.lB;c--;)this.ev[c]=new g.Lu};g.Pu.prototype.Ne=function(){for(var a=1<<this.ns+this.lB;a--;)this.ev[a].Ne()};g.Pu.prototype.Q3=function(a,b){return this.ev[((a&this.$Z)<<this.ns)+((b&255)>>>8-this.ns)]};g.Ro=function(){this.nk=new g.Zj;this.Ye=new g.Wo;this.JJ=[];this.MJ=[];this.NJ=[];this.OJ=[];this.PJ=[];this.LJ=[];this.zp=[];this.eL=[];this.dL=new g.fi(4);this.SA=new g.tr;this.KB=new g.tr;this.XA=new g.Pu;this.iA= this.hA=-1;this.zp[0]=new g.fi(6);this.zp[1]=new g.fi(6);this.zp[2]=new g.fi(6);this.zp[3]=new g.fi(6)};g.Ro.prototype.b8=function(a){if(0>a)return!1;this.hA!==a&&(this.hA=a,this.iA=Math.max(this.hA,1),this.nk.create(Math.max(this.iA,4096)));return!0};g.Ro.prototype.f8=function(a,b,c){var d=1<<c;if(8<a||4<b||4<c)return!1;this.XA.create(b,a);this.SA.create(d);this.KB.create(d);this.a_=d-1;return!0};g.Ro.prototype.Ne=function(){var a=4;this.nk.Ne(!1);g.Ij(this.JJ,192);g.Ij(this.LJ,192);g.Ij(this.MJ, 12);g.Ij(this.NJ,12);g.Ij(this.OJ,12);g.Ij(this.PJ,12);g.Ij(this.eL,114);for(this.XA.Ne();a--;)this.zp[a].Ne();this.SA.Ne();this.KB.Ne();this.dL.Ne();this.Ye.Ne()};g.Ro.prototype.Bg=function(a,b,c){var d=0,e=0,h=0,k=0,t=0,v=0,w=0;this.Ye.VF(a);this.nk.VF(b);for(this.Ne();0>c||v<c;)if(a=v&this.a_,0===this.Ye.Cg(this.JJ,(d<<4)+a))w=this.XA.Q3(v++,w),w=7<=d?w.B2(this.Ye,this.nk.MN(e)):w.A2(this.Ye),this.nk.V6(w),d=4>d?0:d-(10>d?3:6);else{if(1===this.Ye.Cg(this.MJ,d))w=0,0===this.Ye.Cg(this.NJ,d)?0=== this.Ye.Cg(this.LJ,(d<<4)+a)&&(d=7>d?9:11,w=1):(0===this.Ye.Cg(this.OJ,d)?b=h:(0===this.Ye.Cg(this.PJ,d)?b=k:(b=t,t=k),k=h),h=e,e=b),0===w&&(w=2+this.KB.Bg(this.Ye,a),d=7>d?8:11);else if(t=k,k=h,h=e,w=2+this.SA.Bg(this.Ye,a),d=7>d?7:10,a=this.zp[5>=w?w-2:3].Bg(this.Ye),4<=a)if(b=(a>>1)-1,e=(2|a&1)<<b,14>a)e+=g.K7(this.eL,e-a-1,this.Ye,b);else{if(e+=this.Ye.y2(b-4)<<4,e+=this.dL.J7(this.Ye),0>e){if(-1===e)break;return!1}}else e=a;if(e>=v||e>=this.iA)return!1;this.nk.i2(e,w);v+=w;w=this.nk.MN(0)}this.nk.flush(); this.nk.ly();this.Ye.ly();return!0};g.Ro.prototype.a8=function(a){var b,c;if(5>a.size)return!1;b=a.ff();c=b%9;b=~~(b/9);if(!this.f8(c,b%5,~~(b/5)))return!1;b=a.ff();b|=a.ff()<<8;b|=a.ff()<<16;b+=16777216*a.ff();return this.b8(b)};g.C2=function(a,b){var c=new g.Ro,d;if(!c.a8(a))throw"Incorrect stream properties";d=a.ff();d|=a.ff()<<8;d|=a.ff()<<16;d+=16777216*a.ff();a.ff();a.ff();a.ff();a.ff();if(!c.Bg(a,b,d))throw"Error in data stream";};var h=1E-9,k=RegExp("^[+\\\\-]?[0-1]*[.]?[0-1]*$","gi");a.getUnifyJson= function(a){var b=[];if(!(a instanceof ArrayBuffer)){var d={status:3,building:{},floor:{},id:""};b.push(d);return b}new Uint8Array(a);a=new DataView(a);var h;h=4;var k=a.getInt16(h,!1);for(h+=2;0<k;){h+=4;var r=a.getUint8(h,!1);h+=1;for(var u=new ArrayBuffer(r),u=new Uint8Array(u),t=0;t<r;t++)u[t]=a.getUint8(h,!1),h+=1;r=c(u,0,r);h+=2;u=a.getInt8(h,!1);h+=1;0!==u&&(d={},d.status=u,d.building={},d.floor={},d.id=r,b.push(d));var v=a.getInt32(h,!1);h+=4;t=a.getInt32(h,!0);h+=4;v-=t;if(0!==t){for(var d= t%8,w=new ArrayBuffer(8*Math.ceil(t/8)),s=new Int32Array(w),y=0;8<=t;){var z=a.getInt32(h,!0),x=a.getInt32(h+4,!0),z=z^2078870821,x=x^292664;s[y]=z;s[y+1]=x;y+=2;h+=8;t-=8}0!==t&&(z=a.getInt32(h,!0),x=a.getInt32(h+4,!0),z^=2078870821,x^=292664,s[y]=z,s[y+1]=x,h+=t);y=new Uint8Array(w);x=y.length;w=x-8+d;s=new Uint8Array(w);for(t=0;t<w;t++)s[t]=y[t];for(t=0;t<d;t++)s[w-d+t]=y[x-1-t];d={data:[],offset:0,b$:function(a){this.data[this.offset++]=a}};g.C2({data:s,offset:0,ff:function(){return this.data[this.offset++]}}, d);d=d.data;w=d.length;s=new ArrayBuffer(w);y=new Int8Array(s);for(t=0;t<w;t++)y[t]=d[t];d=e(s);d.status=u;d.id=r;b.push(d)}h+=v;k-=1}return b}}f.bH={UZ:a};a(f.bH)})();(function(){var a=f.bH,b=new f.Wu(function(b){var d;(d=b?b.getUnifyJson:a.getUnifyJson)||console.error("getUnifyJson not found!!");return{v4:function(a,b){setTimeout(function(){try{var c=d(a);b(null,c)}catch(k){b(k.message||k.toString())}},0)}}},{hostWorker:f.wx,clientId:"indoor",lazy:!0,batchSend:!1,libPolyfills:[a.UZ]});window.zca=b;f.cH={Pp:function(){return b.Pp()},W0:function(a){b.Hw([a]);return b.v4.apply(b,arguments)}}})();f.IS=f.Y.extend({C:function(a){this.pc(a.map)},pc:function(a){this.map=a},iy:function(a){return this.q6(a)},q6:function(a){a=this.E6(a);var b=[],c;if(a instanceof f.Te)b=[a];else if(a instanceof f.fa.Um)c=new f.Te,c.QF(a),b=[c];else if(this.isArray(a))for(var d,e,g=0,h=a.length;g<h;g+=1)if(d=a[g],e=e||d instanceof f.fa.Um)c=new f.Te({zIndex:1,map:this.map,xa:d,style:null}),c.name=d.Lh+"-"+f.g.Bb(c),b[g]=c;else{b=a;break}return b},E6:function(a){if("FeatureCollection"===a.type){var b=a.features,c= b.length,d;a=Array(c);for(d=0;d<c;d+=1)a[d]=this.pF(b[d])}else a="Feature"===a.type?this.pF(a):"GeometryCollection"===a.type?this.yca(a):this.pF({type:"Feature",xa:a}).xa;return a},pF:function(a){var b=a.geometry,c=null,d=new f.Te({zIndex:1,map:this.map});a.id&&(d.id=a.id);if(b){var e=b.type;switch(e){case "Point":c=this.x6(b);d.Ev=!0;d.set("radius",2,!0);d.set("center",c.rf,!0);d.set("strokeWeight",0,!0);d.T("resolution",this.map);break;case "LineString":c=this.u6(b);break;case "Polygon":c=this.z6(b); break;case "MultiPoint":c=this.Aca(b);break;case "MultiLineString":c=this.v6(b);break;case "MultiPolygon":c=this.w6(b);break;default:throw Error("Bad geometry type: "+e);}c&&(c.Lh=e.toLowerCase(),d.name=c.Lh+"-"+f.g.Bb(d));d.cc=a.properties;d.QF(c)}return d},Oy:function(a){a[0][0]||console.log(a);var b=a.length,c,d=[];c=this.map.Wb(new f.U(a[0][0],a[0][1]));for(var e=c.x,g=c.y,h=c.x,k=c.y,l=0;l<b;l+=1)c=this.map.Wb(new f.U(a[l][0],a[l][1])),d[l]=[c.x,c.y],d[l][0]<e&&(e=d[l][0]),d[l][0]>h&&(h=d[l][0]), d[l][1]<g&&(g=d[l][1]),d[l][1]>k&&(k=d[l][1]);d.qe=[e,g,h,k];return d},z6:function(a){var b=[];a=a.coordinates;for(var c=0;c<a.length;c+=1)b[c]=this.Oy(a[c]);return new f.fa.Rd(b)},x6:function(a){a=a.coordinates;a=new f.U(a[0],a[1]);var b=this.map.Wb(a),b=new f.fa.Ce([b.x,b.y]);b.rf=a;return b},w6:function(a){a=a.coordinates;for(var b=a.length,c=[],d=0;d<b;d+=1){c[d]=[];for(var e=0;e<a[d].length;e+=1)c[d][e]=this.Oy(a[d][e])}return new f.fa.Uo(c)},u6:function(a){a=this.Oy(a.coordinates);return new f.fa.jl(a)}, v6:function(a){for(var b=a.coordinates.length,c=[],d=0;d<b;d+=1)c[d]=this.Oy(a.coordinates[d]);return new f.fa.ur(c)},isArray:function(a){return f.g.isArray(a)}});(function(){var a={cons:{name:"",rank:0.20000000298023224,zoom_max:20,zoom_min:18},pubs:{name:"",rank:0.5,zoom_max:20,zoom_min:18},shops:{name:"",pid:"0",logo:"",area:1,rank:0.10000000149011612,height:0,shop_point_number:5,zoom_max:20,zoom_min:18}},b;for(b in a)a.hasOwnProperty(b)&&(a[b].fk=b);var c={poitype:{},regiontype:{}},d=f.To.SE;f.JS={Z1:function(b,g,h){g={Ym:g,yV:h};for(var k in b)if(b.hasOwnProperty(k)){h=b[k];var l=f.extend(d(g),a[k]);f.g.isArray(h)||(h=[h]);for(var m=0,n=h.length;m<n;m++){var p= h[m],q=h[m].properties,r=d(l),u=void 0;for(u in q)q.hasOwnProperty(u)&&q[u]!==r[u]&&(r[u]=q[u]);q=void 0;for(q in c)c.hasOwnProperty(q)&&r[q]&&(u=r[q].join("-"),c[q][u]||(c[q][u]=[].concat(r[q])),r[q]=c[q][u]);p.properties=r}}return b}}})();f.ez=f.Y.extend({ia:[f.ga],xf:{loaded:20,fd:10,empty:0,Y1:-10,F7:-20},w1:{pubs:"public",cons:"connection",shops:"shop"},tj:-9999,C:function(a){this.ra=a;this.Kn=new f.LS({size:f.l.size,vR:0.7,AN:2,uR:300});this.Kn.h("drop",function(){});this.cV=f.cH;this.SI=new f.IS({map:a});this.Wf=f.fz},pc:function(a){this.ra=a;this.SI.pc(a)},forEach:function(){return this.Kn.forEach.apply(this.Kn,arguments)},Daa:function(){this.Kn.clear()},j5:function(a){for(var b=0,c=a.length;b<c;b++)this.DE(a[b])},Ii:function(a, b){b=b||a.Vb||a.tj;var c=this.Dk(a,b,!0),d=null;c?d=c.B:a.MM&&(d=a.MM.B);return d?new f.ne(d):null},mE:function(a){return a.Ml&&a.Ml>=this.xf.loaded},QO:function(a,b){return this.ZI(a,b)>=this.xf.loaded},J1:function(a,b,c){var d=b||a.Vb;if(d&&d!==this.tj){d=""+d;b=a.Sw;for(var e=[a.Ea,a.On,a.bq,a.Rn],g=[a.nx,a.wD,a.tq],h=[],k=0,l=b.length;k<l;k++){var m=b[k],n=a.bq[m];n<this.xf.loaded&&n>=this.xf.empty||h.push(""+m)}this.xI(e,function(a){a=""+a;return 0<=h.indexOf(""+a)&&a!==d});this.xI(g,function(a){var b= a.split("_"),b=b[0];return 0<=h.indexOf(b)&&0!==a.indexOf(d+"_"+(c?c:""))})}},xI:function(a,b){for(var c=0,d=a.length;c<d;c++)this.fV(a[c],b)},fV:function(a,b){var c=[],d;for(d in a)a.hasOwnProperty(d)&&c.push(d);d=0;for(var e=c.length;d<e;d++)b.call(this,c[d])&&delete a[c[d]]},ZI:function(a,b){return a.bq[b||a.Vb||a.tj]||this.xf.empty},nE:function(a,b){return this.mE(a)&&this.QO(a,b)},nI:function(a){for(var b=[],c=0,d=a.length;c<d;c++){var e=a[c];f.g.isArray(e)&&(e=new f.G(e[0],e[1]));b.push(this.ra.Xd(e))}return b}, NV:function(a){a=a.xa;if(!a||!a.iO)return null;a=a.Jf;for(var b=[],c=0,d=a.length;c<d;c++)b.push(this.nI(a[c].Fa));return b},G3:function(a){a=this.df(a);if(!a)return null;a=a.Ll;if(!a)return null;a=a.cc;return a.name||a.name_cn},F3:function(a){return(a=this.df(a))?this.AD(a):null},AD:function(a,b){if(!a)return null;if(!a.Yu){var c=a.Ll;if(!c)return null;var c=c.cc,d=f.To.SE(this.FV(a));a.Yu=f.extend(d,{id:c.pid,name:c.name||c.name_cn,lnglat:a.AE,floor_details:{floor_indexs:c.floor_indexs,floor_nonas:c.floor_nonas, floor_names:c.floor_names}})}f.extend(a.Yu,{floor:a.Vb});b&&b.floorPath&&(c=(c=this.Dk(a,a.Vb,!0))&&c.zj?this.NV(c.zj):null,f.extend(a.Yu,{floorPath:c}));return a.Yu},p4:function(a,b,c){a=this.Dk(a,b,!0);if(!a)return null;a=a.Ea;b=null;for(var d=0,e=a.length;d<e;d++)if(a[d].cc.cpid===c){b=a[d];break}return this.AC(b)},FV:function(a){var b=this;return{getAllShops:function(c){var d=b.Dk(a,c||a.Vb,!0);c=[];if(!d)return c;for(var d=d.Ea,e=0,g=d.length;e<g;e++)d[e].cc.cpid&&c.push(b.AC(d[e]));return c}}}, eW:function(a){var b=this;return{setCustomStyle:function(c,d){d=f.extend({autoRefresh:!0},d);a.cA=c?b.Wf.HM(c):null;d.autoRefresh&&b.w("featureStyleUpdate",{I:a});return this},getCustomStyle:function(){return b.Wf.lx(a.cA)},setCustomLabelStyle:function(c,d){d=f.extend({autoRefresh:!0},d);a.bA=c?b.Wf.HM(c):null;d.autoRefresh&&b.w("featureLabelStyleUpdate",{I:a});return this},getCustomLabelStyle:function(){return b.Wf.lx(a.bA)},setOptions:function(c,d){d=f.extend({autoRefresh:!0,replace:!0},d);a.gp= d.replace?c:f.extend({},a.gp,c);d.autoRefresh&&b.w("featureOptionsUpdate",{I:a});return this},disableIconRender:function(){this.setOptions({disableIconRender:!0},{replace:!1})},enableIconRender:function(){this.setOptions({disableIconRender:!1},{replace:!1})},disableLabelRender:function(){this.setOptions({disableLabelRender:!0},{replace:!1})},enableLabelRender:function(){this.setOptions({disableLabelRender:!1},{replace:!1})},getOptions:function(){return a.gp}}},AC:function(a){if(!a)return null;if(!a.KL){var b= a.cc,c=b.font_anthor_point?new f.U(b.font_anthor_point[0],b.font_anthor_point[1]):null,d=b.Ym;c||(c=f.B.jg(a.xa.oc()),c=this.ra.Xd(new f.G(c[0],c[1])));var e=f.To.SE(this.eW(a));a.KL=f.extend(e,{id:b.cpid,poiId:b.pid,building_id:d,name:b.name||b.name_cn,lnglat:c,category:this.w1[b.fk]})}return a.KL},Dk:function(a,b,c){if(!this.nE(a))return null;b=b||a.Vb;var d=null;a.Ea?d=a.Ea[b]:a.Ea={};if(!d&&c){c=a.Rn[b];if(!c)return console.warn("Missing geojson of floor",b,a),null;d=a.Ea[b]=this.nU(a,b,c);a.Rn[b]= -1}return d},jF:function(a){for(var b=[Infinity,Infinity,-Infinity,-Infinity],c=0,d=a.length;c<d;c++){var e=a[c].xa;e&&f.B.extend(b,e.oc())}return{Ea:a,B:b,Gc:[b[0],b[1]]}},nU:function(a,b,c){b=this.jF(this.WH(c));c=b.Ea;"floor"===c[0].cc.fk&&(b.zj=c[0],b.Ea=c.slice(1));a.B?f.B.extend(a.B,b.B):a.B=b.B;return b},sV:function(a){var b=a.cc,c=1,d=a.name.split("-"),d=d[0];switch(d){case "point":if(b.poitype&&this.Wf.TO(b.poitype)){a.yT=1;return}break;case "polygon":break;case "multipolygon":break;default:console.warn("Unknown geoType", d)}switch(b.fk){case "building":break;case "floor":c=2;break;case "shops":c=3;break;case "pubs":case "cons":c=3;break;default:console.warn("Unknown category",b.fk)}a.zIndex=c},WH:function(a){a=this.SI.iy(a);for(var b=0,c=a.length;b<c;b++)a[b].ki=b,this.sV(a[b]),a[b].yT&&(a.splice(b,1),b--,c--);a.sort(function(a,b){var c=a.zIndex-b.zIndex;if(0!==c)return c;c=(a.cc.rank||0)-(b.cc.rank||0);return 0!==c?c:a.ki-b.ki});return a},rW:function(a){for(var b=[],c=0,d=a.length;c<d;c++)b.push(this.sW(a[c]));return b}, pU:function(a){var b=[],c=a.floor.floor;a.building.properties.fk="building";c.properties.fk="floor";b.push(c);a=a.floor;for(var c=["shops","pubs","cons"],d=0,e=c.length;d<e;d++)for(var g=a[c[d]],h=0,k=g.length;h<k;h++)b.push(g[h]);return{type:"FeatureCollection",features:b}},dW:function(a){switch(a){case 2:return Error("Building not found!");default:return Error("Server error")}},sW:function(a){var b=a.id,c=this.df(b);if(!c)return console.warn("Can not find: ",b),{error:Error("Can not find: "+b), result:c};if(0!==a.status)return{error:this.dW(a.status),result:c};var d=a.floor.floor.properties.index;c.tj||(c.Vb=c.tj=d);c.OQ=null;a.floor=f.JS.Z1(a.floor,b,d);c.Rn||(c.Rn={});if(!c.Ll&&a.building){b=a.building;b.properties.fk="building";var e=this.WH(b);c.MM=this.jF(e);c.Ll=e[0];c.Sw=b.properties.floor_indexs}a.floor&&(c.bq[d]>=this.xf.loaded?console.warn("Floor alreay load!",d,c):(c.Rn[d]=this.pU(a,c),c.bq[d]=this.xf.loaded));a=c.Ll;if(!a)return console.log("Missing building geojson",c.Rn),c.Ml= this.xf.Y1,c;a=a.cc;c.AE||(c.AE=new f.U(a.centerPoint[0],a.centerPoint[1]));c.Ml=this.xf.loaded;return{error:null,result:c}},d_:function(a,b){b&&(a.oi||(a.oi=[]),a.oi.push(b))},DE:function(a,b,c){c=c||{};"string"===typeof a&&(a={id:a});var d=this.df(a);d?d!==a&&f.extend(d,a):(d=f.extend({Ml:this.xf.empty,bq:{}},a),this.R_(d));var e=this.xv(d);if(this.nE(d,e))return b&&setTimeout(function(){b(null,d)},0),!1;e=parseInt(e,10);if(isNaN(e))b&&b(Error("Floor should be an integer!"));else if(d.Sw&&0>d.Sw.indexOf(e))b&& b(Error("Floor out of range, try these: "+d.Sw));else{var g=this;a=!1;this.d_(d,function(a,d){e===g.tj&&(e=g.xv(d));a||g.nE(d,e)?b&&b(a,d):e===g.xv(d)?c.Q7?b&&b(Error("Floor request failed!"),null):g.DE(d,b,f.extend({},c,{Q7:!0})):b&&b(Error("Requested floor expired!"),null)});d.Ml<this.xf.fd?(d.Ml=this.xf.fd,a=!0):d.Ml===this.xf.fd?a=!1:this.ZI(d,e)<this.xf.fd&&(d.bq[e]=this.xf.fd,a=!0);a&&this.PT([d])}},df:function(a){if(0===a)return null;if(!a)return console.warn("Empty building!"),null;var b= a.id;b||"string"!==typeof a||(b=a);return this.Kn.get(b)},h7:function(a){this.Kn.hl(a)},R_:function(a){return this.Kn.set(a.id,a)},xv:function(a){return a.OQ||a.Vb||a.tj||this.tj},PT:function(a){f.g.isArray(a)||(a=[a]);if(this.Dp)for(var b=this.Dp,c=0,d=a.length;c<d;c++){for(var e=a[c],g=!1,h=0,k=b.length;h<k;h++)e.id===b[h].id&&(g=!0,b[h]=e);g||b.push(e)}else this.Dp=[],this.Dp.push.apply(this.Dp,a);if(!this.mL){var l=this;this.mL=setTimeout(function(){l.mL=null;l.nX(l.Dp);l.Dp.length=0},0)}},dA:function(a, b){a&&b&&(b.Ml=this.xf.F7,b.kB=f.g.Sh()+3E3);if(b&&b.oi){var c=b.oi;b.oi=null;for(var d=0,e=c.length;d<e;d++)c[d](a,b)}this.w(a?"loaded_error":"loaded",{error:a,data:b})},bW:function(a){var b=f.r.xc+"/v3/indoor/indoormaps?",c=[];c.push("poiid="+a.id);c.push("floor="+a.floor);c.push("version="+a.version);c.push("s=rsv3");c.push("key="+f.r.key);c.push.apply(c,["from=indoorH5Map","servicetype=unify","platform=JS","logversion=2.0","sdkversion="+f.r.gC,"appname="+f.r.Kl]);return b+c.join("&")},P_:function(a){function b(b, c){b?e(b):f.g.isArray(c)?a.I8(d.rW(c)):e(Error("Indoor parser not return an array"))}this.cV.Pp();var c=this.bW(a),d=this,e=a.vN;setTimeout(function(){f.ez.S7(c,b,a.vN)},0)},F_:function(a){if(a&&a.length){for(var b=[],c=[],d=[],e=[],g=this,h,k=function(a){console.warn&&console.warn("\\u5ba4\\u5185\\u6570\\u636e\\u52a0\\u8f7d\\u89e3\\u6790\\u5931\\u8d25",a);for(var b=0,c=d.length;b<c;b++)g.dA(a,d[b])},l=0,m=a.length;l<m;l++){h=a[l].data;if(h.kB)if(f.g.Sh()<h.kB){g.dA(Error("Holding errored request!"),h);continue}else h.kB= null;e.push(0);b.push(a[l].id);c.push(a[l].floor);d.push(h)}b.length&&this.P_({version:e.join(";"),id:b.join(";"),floor:c.join(";"),vN:k,I8:function(a){for(var b=0,c=a.length;b<c;b++){var d=a[b];g.dA(d.error,d.result)}}})}},nX:function(a){f.g.isArray(a)||(a=[a]);if(a.length){for(var b=[],c={},d=0,e=a.length;d<e;d++){var g=a[d];"string"===typeof g&&(g=this.df(g));var g={data:g,id:g.id,floor:this.xv(g)},h=g.id+"_"+g.floor;c[h]?console.warn("Param duplicate",h):(c[h]=!0,b.push(g))}this.F_(b)}}}); f.extend(f.ez,{S7:function(a,b,c){var d=this.D_;d||(this.D_=d={});d[a]||(d[a]={Rp:[]});var e=d[a].Rp;e.push({succ:b,err:c});if(!d[a].T7){d[a].T7=!0;var g=new XMLHttpRequest,h=function(b,c){for(var g=0,h=e.length;g<h;g++)e[g][b]&&e[g][b].apply(this,c);d[a]=null;delete d[a]},k=function(){h("err",arguments)},l=function(a){f.cH.W0(a,function(a,b){h("succ",[a,b])})};g.onreadystatechange=function(){4===g.readyState&&(200!==g.status?k(Error("Status code not 200: "+g.status+"_"+g.statusText)):l(this.response))}; g.onerror=k;g.open("GET",a,!0);g.responseType="arraybuffer";g.send()}}});f.Yj=f.S.jd.extend({C:function(a,b){this.QE=!0;f.Yj.qf.C.apply(this,arguments);this.bs=!0;this.yr=new f.Xa.ll(new Jc,b);this.yr.sc.set("bubble",!0)},mba:function(){return this.yr},Gw:function(a){f.Yj.qf.Gw.apply(this,arguments);a.Cl=this.yr},qj:function(a){this.Ja||(this.Ja=!0,this.Qa.w("complete"));return new f.Yj.mH(this,a)}});f.Yj.NG=Oc.extend({C:function(){f.Yj.NG.qf.C.apply(this,arguments);this.bs=!0},ah:function(a){return new f.Yj(this,a)},If:function(){}}); f.Yj.mH=f.L.Pd.extend({C:function(){f.Yj.mH.qf.C.apply(this,arguments)},dc:function(a){a=this.V=a.V;this.zoom=a.zoom;this.M=a.M},kg:function(){return[]}});f.eH=f.L.canvas.jd.extend({ia:[f.ga],C:function(){f.eH.qf.C.apply(this,arguments)},r7:function(a){var b={},c=[],d,e,g;d=0;for(e=a.length;d<e;d++){var h=a[d];g=h.name.split("-")[0];h.style&&(h.style.xi?"polygon"!==g&&"multipolygon"!==g?console.warn("Not polygon"):(b[h.zIndex]||(b[h.zIndex]={zIndex:h.zIndex,FR:{}},c.push(b[h.zIndex])),g=b[h.zIndex].FR,g[h.style.xi]||(g[h.style.xi]=[]),g[h.style.xi].push(h)):console.warn("Style missing uid",h))}c.sort(function(a,b){return a.zIndex-b.zIndex});d=0;for(e= c.length;d<e;d++){g=c[d].FR;for(var k in g)g.hasOwnProperty(k)&&this.z_(g[k])}},yU:function(a,b){for(var c=null,d=0,e=b.length;d<e;d+=1){var g=this.Wd(b[d]),g=[Math.round(g[0])+0.5,Math.round(g[1])+0.5];0<d?a.lineTo(g[0],g[1]):(c=g,a.moveTo(g[0],g[1]))}c&&a.lineTo(c[0],c[1])},xU:function(a,b){for(var c=0,d=b.length;c<d;c+=1)this.yU(a,b[c].Fa)},wU:function(a,b){for(var c=0,d=b.length;c<d;c+=1)this.xU(a,b[c].Jf)},z_:function(a,b){b||(b=a[0].style);var c=this.fb,d=b.strokeColor,e=b.strokeWeight,g=b.strokeOpacity, h=b.fillColor,k=b.fillOpacity,l=b.strokeStyle,m=b.strokeDasharray,n,p;c.save();d&&(c.strokeStyle=d,e&&(c.lineWidth=e),c.lineCap="butt",c.lineJoin=b.lineJoin||"miter");h&&(c.fillStyle=h);c.beginPath();for(var e=0,q=a.length;e<q;e++){p=a[e].xa;if(p instanceof f.fa.Rd||p.iO)p=[p];else if(p instanceof f.fa.Uo||p.QN)p=p.ce;else{console.warn("Unknown geometry",p);continue}this.wU(c,p)}c.closePath();h&&(k!==n&&(n=c.globalAlpha=k),c.fill());d&&(g!==n&&(c.globalAlpha=g),"dashed"===l&&c.setLineDash&&c.setLineDash(m), c.stroke());c.restore()},oy:function(a){return this.r7(a)}});f.KS=f.Y.extend({ia:[f.ga],C:function(a,b){this.ra=a;this.jb=b;this.HW=f.g.bind(this.mp,this);this.Wf=f.fz;this.lR(1);this.H9=!0;this.gR();this.iR();this.jA=!1},lR:function(a){this.Le=a;this.pk=Math.log(this.Le)/Math.log(2)},gR:function(a){this.IW=a||new f.G(0,0)},iR:function(a){this.RJ=a||new f.G(0,0)},c8:function(a){this.jA=a},yba:function(){return this.Le},lX:function(a){return this.ra.Wb(a)},mp:function(){},hw:function(a){a.canvas=a.canvas||a.va;this.Va&&this.Va.na===a.canvas||(this.Va=new f.eH(a.canvas, this.HW));!1!==a.Je?f.f.Qj(this.Va.na,a.width,a.height,!0):a.width!==a.canvas.width?console.warn("width not match"):a.height!==a.canvas.height&&console.warn("height not match");this.Va.Gc=a.Gc;this.Va.M=a.M},Xz:function(a,b,c,d){d=f.extend({split:!0,aG:!0,margin:{x:0,y:0}},d);c=c||a.Vb;this.S6(a,c,b,d);if(!a.On)return null;var e=a.On[c];if(!e)return null;var e=e.LG[b],g=this.jb.Dk(a,c,!0);if(!g)return null;c=e.labels;var h=e.ze;h<e.total&&(c=c.slice(0,e.ze));if(!c||!c.length)return null;var k=d.B|| g.B,g=d.Gc||g.Gc,l=Math.pow(2,20-b),m=d.margin,n=Math.ceil((k[2]-k[0])/l)+2*m.x,k=Math.ceil((k[3]-k[1])/l)+2*m.y,g=[g[0]-m.x*l,g[1]-m.y*l];b={wo:new f.sg,zoom:b,M:l,Gc:g,width:n,height:k};d.canvas&&(b.va=d.canvas);b=this.VB(b,{split:d.split,aq:d.split?50:0,kx:d.split?50:0});k=0;for(g=b.length;k<g;k++){var p;d.bm&&f.g.isArray(d.bm)&&d.bm[k]&&(b[k].va=d.bm[k].va,f.f.Qj(b[k].va,b[k].width,b[k].height,!0));b[k].va?(p=b[k].va,!0===d.Je&&f.f.Qj(p,b[k].width,b[k].height,!0)):this.Yr||(p=this.iv(),f.f.Qj(p, b[k].width,b[k].height,!0),b[k].va=p);l=p?p.getContext("2d"):null;this.w_(c,f.extend({},b[k],{yt:!d.PE,canvas:p,Af:l}));h<e.total?f.extend(b[k],{status:0,ze:h,total:e.total}):(b[k].status=1,b[k].wo=null)}d.PE&&(a.On=null);return b},FI:function(a,b,c){c=f.extend({},c);var d=a.cc;return"label"===c.Ko&&(!(20===d.zoom_max&&20<b-this.pk)&&d.zoom_max&&b-this.pk>d.zoom_max||d.zoom_min&&b-this.pk<d.zoom_min)?!1:this.By(a,b,c)?!0:!1},qA:function(a,b,c){if(a.filter)return a.filter(b,c);for(var d=[],e=0,g=a.length;e< g;e++)!1!==b.call(c,a[e],e)&&d.push(a[e]);return d},tV:function(a,b){if(!a)return a;var c=this.qA(a,function(a){return this.FI(a.I,b,{Ko:"label"})?(a=a.I.Qe)&&(a.fontSize||a.ee)?!0:!1:!1},this);return c.length===a.length?a:c},GI:function(a,b){if(!a)return a;var c=this.qA(a,function(a){return 0>a.name.indexOf("polygon")||!this.FI(a,b,{Ko:"polygon"})||!a.style?!1:!0},this);return c.length===a.length?a:c},oI:function(a,b,c,d){d=f.extend({split:!0,margin:{x:10,y:10}},d);var e=d.B||a.B,g=d.Gc||a.Gc,h= Math.pow(2,20-c),k=d.margin,l=Math.ceil((e[2]-e[0])/h)+2*k.x,e=Math.ceil((e[3]-e[1])/h)+2*k.y,g=[g[0]-k.x*h,g[1]-k.y*h];c=this.VB({zoom:c,M:h,Gc:g,width:l,height:e},{split:d.split});g=0;for(h=c.length;g<h;g++)c[g].va=d.canvas||this.iv(),this.hw(f.extend({},c[g],{canvas:c[g].va,Je:d.Je})),this.Va.oy(b||a.Ea);return c},UU:function(a,b,c){var d=this.jb.jF(a);return d?this.oI(d,a,b,c):null},qI:function(a,b,c,d){c=c||a.Vb;a=this.jb.Dk(a,c,!0);return a&&a.zj?(c=this.GI([a.zj],b))&&c.length?this.oI(a,c, b,d):null:null},VB:function(a,b){b=f.extend({aq:0,kx:0,maxWidth:b.split?f.l.W?512:1536:9999999,maxHeight:b.split?f.l.W?512:1536:9999999},b);for(var c=b.maxHeight,d=a.width,e=a.height,g=a.M,h=a.Gc,k=Math.ceil(d/b.maxWidth),l=Math.round(d/k),c=Math.ceil(e/c),m=Math.round(e/c),n=[],p=0;p<k;p++)for(var q=0;q<c;q++){var r=p*l,u=Math.min(d,(p+1)*l),t=q*m,v=Math.min(e,(q+1)*m),w=[h[0]+r*g,h[1]+t*g],s=[h[0]+u*g,h[1]+v*g];n.push(f.extend({},a,{width:u-r+2*b.aq,height:v-t+2*b.kx,Gc:[w[0]-b.aq*g,w[1]-b.kx*g], ud:new f.ne([w[0]-b.aq*g,w[1]-b.kx*g,s[0]+b.aq*g,s[1]+b.aq*g])}))}return n},rV:function(a,b){return this.qA(a,function(a){a.mI||(a.mI=new f.ne(a.xa.oc()));return b.ud.te(a.mI)?!0:!1})},pI:function(a,b,c,d){c=c||a.Vb;var e=this.jb.Dk(a,c,!0);if(!e)return null;var g=this.GI(e.Ea,b);if(!g||!g.length)return null;this.w("willRenderFloorPolygonFeatures",{zoom:b,floor:c,raa:a,Ea:g});d=f.extend({split:!0,aG:!0,margin:{x:10,y:10}},d);c=d.B||e.B;var e=d.Gc||e.Gc,h=Math.pow(2,20-b),k=d.margin,l=Math.ceil((c[2]- c[0])/h)+2*k.x;c=Math.ceil((c[3]-c[1])/h)+2*k.y;e=[e[0]-k.x*h,e[1]-k.y*h];b={zoom:b,M:h,Gc:e,width:l,height:c};d.canvas&&(b.va=d.canvas);b=this.VB(b,{split:d.split});c=0;for(e=b.length;c<e;c++)h=this.rV(g,b[c]),h.length&&(f.extend(b[c],{status:0,Ea:h,ze:0,total:h.length}),d.bm&&f.g.isArray(d.bm)&&d.bm[c]&&(b[c].va=d.bm[c].va,f.f.Qj(b[c].va,b[c].width,b[c].height,!0)),d.aG||!b[c].va?this.g0(b[c],a,b[c].total+1):(this.hw(f.extend({},b[c],{Je:d.Je})),this.Va.oy(h)));return b},zV:function(a){a.mk&&(a= a.mk);var b=a.Ea.slice(0,a.ze);this.gI(a);a.va=this.iv();this.hw({Je:!0,canvas:a.va,width:a.width,height:a.height,zoom:a.zoom,Gc:a.Gc,M:a.M});this.Va.oy(b);return a.va},gI:function(a){a.ze>=a.total&&(a.status=1,a.Ea=null)},PV:function(){this.LI||(this.LI=f.g.bind(this.zV,this));return this.LI},g0:function(a,b,c){c||(c=f.l.W?300:1E3);b=a.ze;c=Math.min(b+c,a.total);var d=a.Ea;b>=c||!d?a.status=1:(a.ze=c,a.va?"function"!==typeof a.va&&(this.hw(f.extend({},a,{Je:!1})),this.Va.oy(d.slice(b,c)),this.gI(a)): a.va=this.PV(),b=!0,a.ze<a.total?(a.jk||(a.jk=0),a.ze-a.jk<a.total/5&&(b=!1)):a.status=1,b&&!0!==a.GP&&a.jk!==a.ze&&(a.jk=a.ze,this.w("render",{type:"floor"})))},wv:function(a,b){return a+"_"+b},hO:function(a,b){if(!a)return null;if(a.zoom===b)return a;f.g.isArray(a)||(a=[a]);for(var c=[],d=0,e=a.length;d<e;d++)c.push(f.extend({},a[d],{mk:a[d],width:Math.round(a[d].width*Math.pow(2,b-a[d].zoom)),height:Math.round(a[d].height*Math.pow(2,b-a[d].zoom))}));return c},xV:function(a,b,c){if(!c)return null; a=a.Vb;b=Math.round(b);var d=b-2,e,g;for(e=b;20>=e;e++)if(g=this.wv(a,e),c[g])return c[g];for(e=b;e>=d;e--)if(g=this.wv(a,e),c[g])return c[g];return null},iv:function(){this.Lz||(this.Lz=1);var a=document.createElement("canvas");a.id="amap_indoor_c_"+this.Lz;this.Lz++;return a},Yz:function(a,b){var c=this.iv();this.AJ=c;c.width=Math.max(300,a);c.height=Math.max(300,b);c.mv={x:0,y:0,Th:0};return c},DX:function(a,b,c){a=a.mv;a.x+=b;a.Th=Math.max(a.Th,c)},wV:function(a,b){var c=this.AJ;c||(c=this.Yz(a, b));for(var d=c.mv,d=[{x:d.x,y:d.y,Th:Math.max(d.Th,b)},{x:0,y:d.y+d.Th,Th:b}],e=0,g=d.length;e<g;e++){var h=d[e];if(h.x+a<c.width&&h.y+b<c.height)return f.extend(c.mv,h),c}return this.Yz(a,b)},IU:function(a,b){var c=this.BJ;this.BJ||(c=this.BJ=(this.AJ||this.Yz(100,12)).getContext("2d"));var d=this.FL(c,b);return[Math.ceil(c.measureText(a).width)+1,d.fontSize+3]},FL:function(a,b){var c=b.fontSize*this.Le,d=b.strokeColor,e=b.fillColor;a.lineWidth=2;a.font="400 "+c+\'px "Microsoft YaHei"\';a.textBaseline= "bottom";a.textAlign="start";a.strokeStyle=d;a.fillStyle=e;return{fontSize:c}},bX:function(a){var b=[a.width,a.height],c=a.style,d=a.text,e=[3,3],e=[b[0]+e[0],b[1]+e[1]],g=this.wV(e[0],e[1]);if(!g)return console.error("No canvas got!"),null;var h=g.getContext("2d"),k=g.mv;this.FL(h,c);h.textBaseline="bottom";c.strokeColor&&h.strokeText(d,k.x,k.y+b[1],b[0]);c.fillColor&&h.fillText(d,k.x,k.y+b[1],b[0]);f.extend(a,{x:k.x,y:k.y,style:null,text:null});a.va=g;this.DX(g,e[0],e[1]);return g},VV:function(){this.QJ|| (this.QJ=f.g.bind(this.bX,this));return this.QJ},WU:function(a,b){if(!b.fontSize)return{va:null,width:0,height:0};var c=this.IU(a,b),c={style:b,text:a,width:c[0],height:c[1],eF:c[0],dF:c[1]};c.va=this.VV();return c},VU:function(a,b){b=b||a.Vb;var c=this.jb.Dk(a,b,!0);if(!c)return null;var d=[],e=[];a.Ll&&(d.push(a.Ll),c.zj&&(a.Ll.Tz=f.B.jg(c.zj.xa.oc())));c.zj&&d.push(c.zj);d.push.apply(d,c.Ea);for(var c=0,g=d.length;c<g;c++){var h=d[c],k=h.cc,l=h.xa.oc();if(!k.poitype||!this.Wf.TO(k.poitype)){if(!h.Tz&& k.font_anthor_point){var m=this.lX(k.font_anthor_point);h.Tz=[m.x,m.y]}k.rank||k.building_poi_style&&(k.rank=10);e.push({coords:h.Tz||f.B.jg(l),bu:k.rank||0,I:h,cc:h.cc})}}e.sort(function(a,b){var c=b.bu-a.bu;if(0!==c)return c;var c=a.I.Qe,d=b.I.Qe,e=0,g=0;c&&d&&(c.ee&&(e=1),d.ee&&(g=1));return g-e});return{LG:{},labels:e}},h0:function(a,b,c,d){d||(d=f.l.W?300:1E3);b=a.LG[c];var e=b.ze;d=Math.min(e+d,b.total);var g=b.labels;if(e>=d||!g)b.status=1;else{for(;e<d;e++){var h=g[e].I;if(!g[e].Hu)g[e].Hu= h.Y$={};else if(g[e].Hu[c])continue;this.By(h,c,{Ko:"label"});var k=h.cc.name||h.cc.name_cn,l=h.Qe;if(l){k=this.WU.call(this,k,l);h=l.vq||[c];l.ee&&(k.ee=l.ee);for(var l=0,m=h.length;l<m;l++)g[e].Hu[parseInt(h[l],10)+this.pk]=k}else console.warn("No style",g[e])}b.ze=d;c=!0;b.ze<b.total?(b.jk||(b.jk=0),b.ze-b.jk<b.total/5&&(c=!1)):b.status=1;c&&!0!==a.GP&&b.jk!==b.ze&&(b.jk=b.ze,this.w("render",{type:"label"}))}},sU:function(a,b){var c=a.LG,d=c[b];d||(d=this.tV(a.labels,b),d=c[b]={total:d.length, labels:d,status:0,ze:0});d.ze===d.total&&(d.status=1)},S6:function(a,b,c){if(b=b||a.Vb){a.On||(a.On={});var d=a.On;d[b]||(d[b]=this.VU(a,b));this.sU(d[b],c);this.h0(f.extend({},d[b],{GP:!0}),a,c,999999999);return d[b]}},Tr:function(a,b,c,d){var e=a.Vb;if(!e)return null;var g=Math.round(b)+this.pk,e=d.gq?d.gq.call(this,e,g):null,h=d.Dt,k=e&&h?h[e]:null;(!k||k.Cz)&&c&&(k=d.Ws.call(this,a,g,k?{bm:k}:null))&&(k.Cz&&(k.Cz=null),e&&(h[e]=k));return k?g===b?k:this.hO(k,b):d.DN?(a=this.xV(a,b,h),this.hO(a, b)):null},d4:function(a,b,c){b=b.zoom;a.tq||(a.tq={});return this.Tr(a,b,c,{Dt:a.tq,gq:this.wv,Ws:function(a,b,c){return this.Xz(a,b,a.Vb,c)}})},JD:function(){var a;this.ql&&(a=this.ql.Mv);return a||0},e4:function(a,b){this.FW();var c=Math.round(b.zoom)+this.pk;a.tq||(a.tq={});this.Xz(a,c,a.Vb);c=this.n_();if(0<this.JD())return[];if(b.la){for(var d=[],e=0,g=c.length;e<g;e++){var h=c[e].Fa;h&&b.la.contains(new f.G(h[0],h[1]))&&d.push(c[e])}c=d}return c},Z3:function(a,b,c){b=b.zoom;a.wD||(a.wD={}); return this.Tr(a,b,c,{DN:!0,Dt:a.wD,gq:function(b,c){return b+"_"+c+(a.mw?"_sel":"")},Ws:function(a,b){return this.qI(a,b,a.Vb)}})},xN:function(a,b){if(a){b=f.extend({Vs:!0},b);var c=[a.nx];b.Vs&&(c.push(a.tq),a.On=null);for(var d=0,e=c.length;d<e;d++){var g=c[d];if(g)for(var h in g)g.hasOwnProperty(h)&&(g[h].Cz=!0)}}},Y3:function(a,b,c){b=b.zoom;a.nx||(a.nx={});return(a=this.Tr(a,b,c,{DN:!0,Dt:a.nx,gq:this.wv,Ws:function(a,b,c){return this.pI(a,b,a.Vb,c)}}))?a:null},X3:function(a,b,c,d){return this.Tr(a, b.zoom,!0,{Dt:{},gq:null,Ws:function(a,b){return this.UU(d.Ea,b,f.extend({PE:!0,split:!1,canvas:d.canvas},d.F))}})},nA:function(a,b,c,d){var e=b.la,g=e.ub,h=e.uc;return this.Tr(a,b.zoom,!0,{Dt:{},gq:null,Ws:function(a,b){return d.iE.call(this,a,b,a.Vb,f.extend({PE:!0,margin:{x:0,y:0},split:!1,canvas:c,B:[g.x,g.y,h.x,h.y],Gc:[g.x,g.y],aG:!1},d.F))}})},W2:function(a,b,c,d){return this.nA(a,b,c,{iE:this.Xz,F:d})},U2:function(a,b,c,d){return this.nA(a,b,c,{iE:this.qI,F:d})},T2:function(a,b,c,d){return this.nA(a, b,c,{iE:this.pI,F:d})},rA:function(a,b,c,d,e,g,h){c*=e;d*=e;e=h.call(this,{gS:c,Th:d,xx:c/2,jq:d/2,M:e});h=0;for(var k=e.length;h<k;h++){var l=[b[0]+e[h][0],b[1]+e[h][1]],l=[l[0],l[1],l[0]+c,l[1]+d];if(!g||(!a||a.contains(new f.ne(l)))&&!g.search(l).length)return l}return null},aW:function(a,b,c){var d=Math.ceil((a[0]-b[0])/c);b=Math.ceil((a[1]-b[1])/c);var e=Math.round((a[2]-a[0])/c);a=Math.round((a[3]-a[1])/c);return{width:e,height:a,x:d,y:b}},FW:function(){this.Yr=!0;this.FA=[]},n_:function(){this.Yr= !1;var a=this.FA;this.FA=null;return a},rU:function(a,b,c){b=a.cc;if(!b)return console.warn(a),null;var d=b.name||b.name_cn,e=b.pid,g=a.coords,h=[];a.tE&&h.push({source:a,ud:a.tE});a.gE&&h.push({T4:!0,source:a.Bx?a.Bx:a,ud:a.gE});a=[];for(var k=[],l=0,m=h.length;l<m;l++){var n=h[l].source;a.push(n.va||n.J4);n=[Math.round((h[l].ud[0]-g[0])/c),Math.round((h[l].ud[1]-g[1])/c),n.width,n.height,n.x||0,n.y||0,n.eF||n.width,n.dF||n.height];h[l].T4&&(n.HJ=!0);k.push(n)}return{Fa:g,name:d,Xk:e,Kaa:b.cpid, Ha:a,xb:k}},lA:function(a,b,c,d,e,g,h){if(this.Yr){if(c.va){"function"===typeof c.va&&(c.va(c.mk||c,{ud:d,M:e,Gc:g}),c.mk&&(c=f.extend({},c,c.mk)));var k=this.rU(c,d,e);k&&this.FA.push(k)}}else{k=this.aW(d,g,e);if(c.va){"function"===typeof c.va&&(c.va(c.mk||c,{ud:d,M:e,Gc:g,Cd:k,canvas:a}),c.mk&&(c=f.extend({},c,c.mk)));if(c.va){var l=!0;if(h){var m=new f.ne(0,0,a.width,a.height),n=new f.ne(k.x,k.y,k.x+c.width,k.y+c.height);m.contains(n)||(l=!1)}l&&b.drawImage(c.va,c.x||0,c.y||0,c.eF||c.width,c.dF|| c.height,k.x,k.y,c.width,c.height)}return k}if(c.oi){var p=this,k=c.oi,q=Array.prototype.slice.call(arguments,0);q.push(1);k.push(function(a,b){a||(f.extend(q[1],b),p.lA.apply(this,q))})}}},ip:function(a,b,c){return[a[0]-b[0]*c,a[1]-b[1]*c,a[2]+b[0]*c,a[3]+b[1]*c]},O$:function(a){a=this.jb.nI([[a[0],a[1]],[a[2],a[1]],[a[2],a[3]],[a[0],a[3]]]);var b=new AMap.Polygon({map:this.ra,path:a,fillColor:"rgba(0,0,0,0.3)",strokeColor:"",Cb:1});this.ra.h("zoomstart",function(){b.pc(null)});return b},A_:function(a, b){if(a.I.Qe){var c=a.I.Qe.jI,d=a.coords,e=this.ED(a.I,"labelSizeOffset")||this.RJ,g=Math.max(0<a.width?1:0,a.width+e.xd()),h=Math.max(0<a.height?1:0,a.height+e.Lc()),e=g-a.width,k=h-a.height,d=this.rA(b.yt?b.ud:null,d,g,h,b.M,c?b.wo:null,function(a){return[[-a.xx,-a.jq],[0,-a.jq],[-a.gS,-a.jq]]});if(!d)return!1;c&&b.ud.te(new f.ne(d))&&b.wo.Et(this.ip(d,[1,1],b.M),a);d=this.ip(d,[e/2*-1,k/2*-1],b.M);a.tE=d;this.lA(b.canvas,b.Af,a,d,b.M,b.Gc,b.yt);return!0}},v_:function(a,b){var c=a.Bx;if(!c)return!1; if(a.I.Qe){var d=a.I.Qe.jI,e=a.coords,g=this.ED(a.I,"iconSizeOffset")||this.IW,h=Math.max(0<c.width?1:0,c.width+g.xd()),k=Math.max(0<c.height?1:0,c.height+g.Lc()),g=h-c.width,l=k-c.height,m=this.rA(b.yt?b.ud:null,e,h,k,b.M,d?b.wo:null,function(a){return[[-a.xx,-a.jq]]});if(!m)return!1;var n=this.ED(a.I,"labelSizeOffset")||this.RJ,p=Math.max(0<a.width?1:0,a.width+n.xd()),q=Math.max(0<a.height?1:0,a.height+n.Lc()),n=p-a.width,r=q-a.height,u=null;0<p*q&&(u=this.rA(b.yt?b.ud:null,e,p,q,b.M,d?b.wo:null, function(a){return[[-a.xx,(0+k/2)*a.M],[(0+h/2)*a.M,-a.jq],[-a.gS-(0+h/2)*a.M,-a.jq],[-a.xx,-a.Th-(0+k/2)*a.M]]}));e=[];m&&(d&&b.ud.te(new f.ne(m))&&b.wo.Et(this.ip(m,[0,0],b.M),c),m=this.ip(m,[g/2*-1,l/2*-1],b.M),a.gE=m,c.cc=a.cc,c.gE=m,c.coords=a.coords,c.HJ=!0,this.Yr&&u||e.push([c,m]));u&&(d&&b.ud.te(new f.ne(u))&&b.wo.Et(this.ip(u,[0,0],b.M),a),u=this.ip(u,[n/2*-1,r/2*-1],b.M),a.tE=u,e.push([a,u]));this.Yr&&1<e.length&&console.warn("More than one image with _imageRenderingHolded");c=0;for(d= e.length;c<d;c++)this.lA(b.canvas,b.Af,e[c][0],e[c][1],b.M,b.Gc,b.yt)}},bJ:function(a){return f.r.Fb+"/images/indoor_icon/"+(1<this.Le?"36/"+a+"@2x":"18/"+a)+".png"},iV:function(a,b){var c=this.bJ(a),d=document.createElement("img");d.crossOrigin="Anonymous";d.onload=function(){d.loaded=!0;b(null,this);d.onload=d.onerror=null};d.onerror=function(a){b(a,this);d.onload=d.onerror=null};d.src=c},TV:function(a){this.ql||(this.ql={Mv:0});var b=this.ql[a];if(!b){var b=this.ql[a]={status:1,ee:a,width:18*this.Le, height:18*this.Le,J4:this.bJ(a),oi:[]},c=this;this.ql.Mv++;this.iV(a,function(a,e){c.ql.Mv--;if(!a&&(b.va=e,b.eF=e.width,b.dF=e.height,b.oi)){var g=b.oi;b.oi=null;for(var h=0,k=g.length;h<k;h++)g[h].call(c,null,b)}c.ql.Mv||c.w("render",{type:"icon"})})}return b},w_:function(a,b){if(a.length)for(var c=0,d=a.length;c<d;c++)if(a[c].Hu){var e=a[c].Hu[b.zoom];if(e){!this.jA&&e.ee&&(e.Bx=this.TV(e.ee));var g=!this.jA&&e.Bx?this.v_:this.A_;a[c].aL||(a[c].aL=new f.G(a[c].coords[0],a[c].coords[1]));b.ud.contains(a[c].aL)&& (a[c].I&&this.By(a[c].I,b.zoom,{Ko:"label"}),g.call(this,f.extend({mk:e},a[c],e),b))}}},s3:function(a){if(a.gp){var b=a.gp;b.disableIconRender&&a.Qe&&a.Qe.ee&&(a.Qe=f.extend({},a.Qe,{ee:null}));b.disableLabelRender&&a.Qe&&(a.Qe=f.extend({},a.Qe,{fontSize:0}))}},ED:function(a,b){return a&&a.gp?a.gp[b]:null},By:function(a,b,c){c.Ko||console.warn("triggerType not set");f.extend({Ko:"polygon"},c);b-=this.pk;c=a.cc;var d=c.poitype||c.building_poi_style;d&&(a.Qe=this.Wf.fO(d,b));a.bA&&(a.Qe=this.Wf.yP(a.Qe, a.bA));if(c.highlighted_floor_line_style)(d=this.jb.df(c.Ym))?a.style=this.Wf.g4(d.mw?c.highlighted_floor_line_style:c.unhighlighted_floor_line_style,b):console.warn("Can not load: ",c);else if(c=c.regiontype||c.floor_region_type)a.style=this.Wf.n4(c,b);a.cA&&(a.style=this.Wf.yP(a.style,a.cA));this.s3(a);if(!a.style&&!a.Qe)return!1;1!==this.Le&&a.style&&a.style.strokeWeight&&(a.style=this.Wf.MD(a.style),a.style.strokeWeight*=this.Le);return!0}});f.dH=f.Y.extend({ia:[f.ga,f.Gd],F:{visible:!0,zooms:[18,20],floorBarContainerStyle:null,floorListContainerStyle:null},C:function(a){f.g.rb(this,a);this.a={};this.LB();this.setOptions(this.F);this.VI()},setOptions:function(a){this.jf(a)},show:function(){this.setOptions({visible:!0})},hide:function(){this.setOptions({visible:!1})},visibleChanged:function(){var a=this.get("visible");f.f.wa(this.a.H,{display:a?"block":"none"});a&&(a=this.a.H.gj)&&this.As(a)},floorDataChanged:function(){var a=this.get("floorData"); this.l_(a)},$W:function(){return!!this.get("visible")},wn:function(a,b){this.map=a;b.appendChild(this.a.H);this.vd=b;this.si()},xo:function(){this.yi();this.vd.removeChild(this.a.H);this.a={};this.map=this.vd=null},si:function(){this.oa={};for(var a="click mouseover mouseout mousedown mouseup touchstart touchend touchcancel mousewheel".split(" "),b=0,c=a.length;b<c;b++)this.oa[a[b]]=f.event.R(this.a.H,a[b],this.oW,this)},Sz:function(a){if(a){var b=this;setTimeout(function(){a.call(b,b.Zu)},0)}},VI:function(a){if(this.Zu)this.Sz(a); else{var b=function(a){a.Pv&&(clearTimeout(a.Pv),a.Pv=null);a.VJ&&a.$A&&(a.$A.apply(this,arguments),a.VJ=!1)},c={"mousewheel DOMMouseScroll":{"*":function(a,b){f.A.stopPropagation(b);var c=0;b.wheelDelta?(c=120,f.l.Kx&&(c=120===Math.abs(b.wheelDelta)?400:240),c=b.wheelDelta/c,window.opera&&9.5>parseFloat(window.opera.version())&&(c=-c)):b.detail&&(c=-b.detail);this.AX(c)}},mousedown:{"floor-nav":function(a){a.ZA=!1;var b=arguments,c=this;a.Pv=setTimeout(function(){a.Pv=null;a.ZA=!0;a.aB&&(a.aB.apply(c, b),a.VJ=!0)},1E3)}},mouseup:{"floor-nav":function(){b.apply(this,arguments)}},mouseover:{"floor-nav":function(a){f.f.ta(a,"hover")}},mouseout:{"floor-nav":function(a){f.f.za(a,"hover");b.apply(this,arguments)}},click:{"floor-plus":function(a){a.ZA||this.iK(1)},"floor-minus":function(a){a.ZA||this.iK(-1)},"floor-nonas":function(a){this.AV(a.parentNode)}}};if(f.l.W&&f.l.Yd){var d=this;this.Kp=!0;f.$a.load("AMap.IndoorMapTouch",function(){d.Zu=c;d.RW();d.Sz(a)})}else this.Zu=c,this.Sz(a)}},oW:function(a){var b= a.target||a.target||a.srcElement,c=a.type;if(b){var d=[b,a];this.VI(function(a){for(var g in a)if(a.hasOwnProperty(g)&&!(0>g.split(" ").indexOf(c))){var h=a[g],k;for(k in h)("*"===k||f.f.lq(b,k))&&h[k].apply(this,d)}})}},vA:function(a,b){var c=this.a.H.BV,d=c.indexOf(a);if(0>d)console.warn("Can not found floor: ",a,c);else if(d+=b,!(0>d||d>=c.length))return{id:d,Pn:c[d]}},iK:function(a){(a=this.vA(this.a.H.gj,a))&&this.aC(a.Pn)},AX:function(a){0<a?this.bC(null,!0):this.cC(null,!0)},AV:function(a){a.pl!== this.a.H.gj&&this.aC(a.pl)},aC:function(a){this.n0("floorChanged",{Pn:a,s1:this.a.H.ek})},n0:function(a,b){this.w(a,b)},yi:function(){this.Es();if(this.oa)for(var a in this.oa)this.oa.hasOwnProperty(a)&&f.event.removeListener(this.oa[a])},vU:function(){var a=document.createElement("div");a.className="floor-btn floor-nav floor-plus";a.innerHTML="+";a.aB=function(){this.bC()};a.$A=function(){this.Es()};return a},uU:function(){var a=document.createElement("div");a.className="floor-btn floor-nav floor-minus"; a.innerHTML="-";a.aB=function(){this.cC()};a.$A=function(){this.Es()};return a},T$:function(){return this.a.H.gj},S$:function(){return this.a.H.ek},qv:function(a){var b=null;this.sA(function(c){if(c.pl===a)return b=c,!1});return b},fR:function(a,b,c){if(this.a.H.ek===a){a=this.qv(b);if(!a)return!1;this.RT(a,!c);c&&this.As(b)}},RT:function(a,b){if(!a)return!1;var c=this.uV(a,"amap-indrm-loader");b?c&&c.parentNode.removeChild(c):c||(c=document.createElement("div"),c.className="amap-indrm-loader",a.appendChild(c)); this.oj(a,"with-indrm-loader",!b);this.oj(this.a.H,"with-indrm-loader",!b);return!0},uV:function(a,b){var c=null;this.NI(a,function(a){if(f.f.lq(a,b))return c=a,!1},b);return c},NI:function(a,b,c){a=Array.prototype.slice.call(a.childNodes,0);for(var d=0,e=a.length;d<e;d++){var g=a[d];if(g&&(!c||f.f.lq(g,c))&&!1===b.call(this,g,d))break}},sA:function(a){this.NI(this.a.dm,a,"floor-list-item")},k8:function(a,b){this.a.H.ek!==a?console.warn("building id not match"):(this.sA(function(a){this.oj(a,"selected", a.pl===b)}),this.a.H.gj=b,this.m_(),this.As(b))},f_:function(a){var b=a.offsetLeft,c=a.offsetTop;do if(a=a.offsetParent)b+=a.offsetLeft,c+=a.offsetTop;else break;while(1);return{left:b,top:c}},av:function(a){if(!a.getBoundingClientRect)return this.f_(a);a=a.getBoundingClientRect();var b=document.documentElement;return{top:a.top+b.scrollTop,left:a.left+b.scrollLeft}},$u:function(a){return a.offsetHeight||a.clientHeight||0},WW:function(a){var b=document.body;if(b.contains)return b.contains(a);for(;a;){if(a=== b)return!0;a=a.parentNode}return!1},bC:function(a,b){if(f.f.lq(this.a.H,"can-scroll-up")){var c=this.a.H;a||(a=c.AL||c.gj);var d=this.vA(a,1);if(d&&(this.As(d.Pn),!b)){this.Es();var e=this;e.zw=setTimeout(function(){e.bC(d.Pn)},170)}}},cC:function(a,b){if(f.f.lq(this.a.H,"can-scroll-down")){var c=this.a.H;a||(a=c.AL||c.gj);var d=this.vA(a,-1);if(d&&(this.As(d.Pn),!b)){var e=this;this.Es();e.zw=setTimeout(function(){e.cC(d.Pn)},170)}}},Es:function(){this.zw&&(clearTimeout(this.zw),this.zw=null)},P$:function(a){return f.To.YC(a)}, QH:function(a,b){if(!f.l.W)return f.To.uM(a,b)},eJ:function(a){return this.av(a).top-this.av(this.a.dm).top},dJ:function(a,b){var c=this.qv(a);if(!c)return!1;var d=this.$u(this.a.dm),e=this.$u(this.a.vD),g=this.$u(c),c=this.eJ(c)-e/2+g/2;b=f.extend({OE:this.Kp?-g:0,LE:d-e+(this.Kp?g:0)},b);return{g5:d,h1:e,OE:b.OE,LE:b.LE,KR:c}},As:function(a){if(this.$W()){var b=this.qv(a);if(!b)console.warn("Can not find floor: ",a);else if(this.WW(b)){var b=this.a.dm,c=this.dJ(a),d=this.Kp||c.g5>c.h1;this.oj(this.a.H, "can-scroll",d);this.a.H.AL=a;d&&(a=c.KR,d=c.OE,c=c.LE,a<d?a=d:a>c&&(a=c),d=-parseInt(b.style.marginTop,10)||0,5<Math.abs(d-a)&&(this.QH(b),b.style.marginTop=-a+"px"),d=-parseInt(b.style.marginTop,10)||0,this.oj(this.a.H,"can-scroll-down",d<c),this.oj(this.a.H,"can-scroll-up",0<d));this.zL()}}},zL:function(a){if(!this.Kp){arguments.length||(a=this.a.H.gj);var b=this.qv(a);if(!b)return!1;var c=this.a.vD,d=this.a.dm;this.QH(this.a.OF);var e=this.av(c).top-this.av(this.a.H).top,b=e+this.eJ(b)+(parseInt(d.style.marginTop, 10)||0);this.a.OF.style.top=b+"px";this.a.OF.style.display=b>this.$u(c)+e+5||b<e-15?"none":""}},m_:function(){var a=this.a.H,b=a.gj,c=a.uX;this.oj(this.a.lQ,"disabled",b===a.sX);this.oj(this.a.BP,"disabled",b===c)},oj:function(a,b,c){a&&(c?f.f.ta:f.f.za).call(f.f,a,b)},LB:function(){if(this.a.H){var a=this.a.H;a.innerHTML="";a.className="amap-indoormap-floorbar-control";a.ek=null}else this.a.H=f.f.create("div",null,"amap-indoormap-floorbar-control")},l_:function(a){var b=this.a.H;a?(a.id!==b.ek&& this.oU(a),b.gj=a.Vb,this.k8(b.ek,b.gj)):this.LB()},EL:function(a,b){b?a.setAttribute("title",b):a.removeAttribute("title")},oU:function(a){this.LB();var b=this.a.H;this.oj(b,"is-mobile",!!f.l.W);this.oj(b,"touch-scroll",this.Kp);var c=a.u3,d=c.v3,e=c.xD.length,g=e>(this.Kp?Infinity:5),h=document.createDocumentFragment(),k=f.f.create("div",h,"panel-box");this.EL(b,c.name_cn);this.a.OF=f.f.create("div",k,"select-dock");g&&(this.a.lQ=this.vU(),k.appendChild(this.a.lQ));var l=document.createElement("ul"); l.className="floor-list";for(var m=e-1;0<=m;m--){var n=document.createElement("li");n.className="floor-list-item";n.innerHTML=\'<div class="floor-btn floor-nonas">\'+c.w3[m]+"</div>";n.pl=c.xD[m];0===m?b.uX=n.pl:m===e-1&&(b.sX=n.pl);this.EL(n,d[m]);l.appendChild(n)}b.aaa=0;b.$$=e-1;b.BV=[].concat(c.xD);c=document.createElement("div");c.className="floor-list-box";c.appendChild(l);k.appendChild(c);g&&(this.a.BP=this.uU(),k.appendChild(this.a.BP));b.ek=a.id;b.appendChild(h);this.a.dm=l;this.a.vD=c;this.ST()}, ST:function(){var a={floorBarContainer:this.a.H,floorListContainer:this.a.vD},b;for(b in a)if(a.hasOwnProperty(b)){var c=this.get(b+"Style");c&&this.TT(a[b],c)}},TT:function(a,b){if(a)for(var c in b)b.hasOwnProperty(c)&&(a.style[c]=b[c])}});var de=window.AMap.CustomLayer.extend({F:{visible:!0,opacity:1,zIndex:11,featureszIndex:null,zooms:[17,25],hideFloorBar:!1,bubble:"true",alwaysShow:!1,disableIconRender:!1,disableLabelRender:!1,disableHoverMarker:!1,autoLoadBuildingsInTile:!0},C:function(a){this.CLASS_NAME="AMap.IndoorMap";if(!f.l.Ht)return null;this.sL=!f.l.W;this.np=f.f.create("div");this.yJ=f.f.create("div",this.np,"floor-outline-image-con");this.$r=f.f.create("div",this.np,"floor-image-con");this.GA=f.f.create("div",this.np,"highlight-image-con"); this.Dv=f.f.create("div",this.np,"label-image-con");de.qf.C.call(this,this.np,a);this.CLASS_NAME="AMap.IndoorMap";f.e.hb(this.CLASS_NAME,a);f.f.ta(this.np,"amap-indoor-map");this.Ug=new Fc({offset:new f.G(0,0),zooms:this.get("zooms")||[3,20],content:" ",noSelect:!0,visible:!1});this.Ug.ma=!0;this.ra=this.uv();this.Rc=null;this.jb=this._dataMgr=new f.ez(this.ra);this.jb.h("loaded",this.ok,this);this.jb.h("featureStyleUpdate",this.cY,this);this.jb.h("featureLabelStyleUpdate",this.aY,this);this.jb.h("featureOptionsUpdate", this.bY,this);this.XT=1;this.zg=void 0;this.Wf=f.fz;this.dV=this.Wf.MD({strokeColor:"rgba(224,180,135,1)",fillColor:"rgba(224,180,135,0.5)"});this.zJ=!0;this.ra&&this.mapChanged();this.yM=this.getRenderLabels;f.g.Bb(this)},setzIndex:function(a){de.qf.setzIndex.apply(this,arguments);this.ij&&this.ij.setzIndex(this.get("featureszIndex")||a)},LP:function(a){this.EB(a.NM)},kS:function(){return!!this.get("autoLoadBuildingsInTile")},showIndoorMap:function(a,b,c,d){f.e.add(this.CLASS_NAME,"showIndoorMap"); var e=this;if(this.GC()){var g=arguments[arguments.length-1],h=null;g&&"function"===typeof g&&(h=g);h===b&&(b=null);h===c&&(c=null);this.fG(a,b,function(a,b,g){if(!a){var n=(e.get("zooms")||[18,20])[0],n=Math.max(e.ra.get("zoom"),n),p=b.AE,q=null;c&&(q=e.jb.p4(b,b.Vb,c));q&&q.lnglat&&(p=q.lnglat);d||e.ra.setZoomAndCenter(n,p,!0);e.GC()&&e.ok();e.Is(b);q&&(g.shop=q)}f.event.J(e,"floor_complete",g);h&&h(a,g)},{ZR:!1})}},showFloor:function(a,b){f.e.add(this.CLASS_NAME,"showFloor");if(!this.ti)return!1; this.showIndoorMap(this.ti,a,void 0,b)},showFloorBar:function(){f.e.add(this.CLASS_NAME,"showFloorBar");this.set("hideFloorBar",!1)},hideFloorBar:function(){f.e.add(this.CLASS_NAME,"hideFloorBar");this.set("hideFloorBar",!0)},hideFloorBarChanged:function(){this.pn()},featureszIndexChanged:function(){this.ij&&this.ij.setzIndex(this.get("featureszIndex")||this.get("zIndex"))},visibleChanged:function(){var a=de.qf.visibleChanged;a&&a.apply(this,arguments);this.HB()},disableLabelRenderChanged:function(){this.ok()}, hideLabels:function(){f.e.add(this.CLASS_NAME,"hideLabels");this.set("disableLabelRender",!0)},showLabels:function(){f.e.add(this.CLASS_NAME,"showLabels");this.set("disableLabelRender",!1)},cursorChanged:function(){this.SB(this.get("cursor"))},SB:function(a){this.qd&&this.qd.yr.sc.set("cursor",a)},getSelectedBuildingId:function(){f.e.add(this.CLASS_NAME,"getSelectedBuildingId");return this.ti||null},getSelectedBuilding:function(a){f.e.add(this.CLASS_NAME,"getSelectedBuilding");var b=this.ti||null; return b?(b=this.jb.df(b))?this.jb.AD(b,a):null:null},If:function(){this.yI()},cY:function(a){this.refreshFloorStyle(a.I.cc.Ym,{Vs:!1})},aY:function(a){this.refreshFloorStyle(a.I.cc.Ym,{Vs:!0})},bY:function(a){this.refreshFloorStyle(a.I.cc.Ym,{Vs:!0})},refreshFloorStyle:function(a,b){if(this.jb){b=f.extend({Vs:!0},b);if(a)this.zc.xN(this.jb.df({id:a}),b);else{var c=this;this.jb.forEach(function(a){c.zc.xN(a,b)})}this.dv();this.ok()}},iconSizeOffsetChanged:function(){this.zc&&(this.zc.gR(this.get("iconSizeOffset")), this.refreshFloorStyle())},disableIconRenderChanged:function(){this.zc&&(this.zc.c8(this.get("disableIconRender")),this.refreshFloorStyle())},labelSizeOffsetChanged:function(){this.zc&&(this.zc.iR(this.get("labelSizeOffset")),this.refreshFloorStyle())},mapChanged:function(){if(this.zJ){var a=this.uv();this.Rc&&this.ra===a||(de.qf.mapChanged.apply(this,arguments),this.yI(),this.ra=a,this.Rc=this.GV(),this.li()?this.VT():!this.ra||this.Rc||this.fM||(this.fM=!0,this.ra.h("coreMapCreated",function(){this.fM= !1;this.mapChanged()},this,!0)))}},yI:function(){this.ra&&(this.ra.D("mousemove",this.$J,this),this.ra.D("zoomchange",this.cB,this),this.ra.D("movestart",this.bK,this),this.ra.D("mapmove",this.cK,this),this.ra.D("moveend",this.aK,this),this.ra.D("dragstart",this.ZJ,this),this.ra.D("dragend",this.YJ,this),this.ra.D("resize",this.ok,this),this.ra.D("click",this.WJ,this),this.ra.D("dblclick",this.XJ,this));this.Tg&&(this.ra&&this.ra.removeControl(this.Tg),this.Tg=null);this.qd&&(this.qd.clear(),this.r_(), this.qd=null);this.zc&&this.zc.D("render",this.jw,this);this.zg=!0;f.Pf&&(f.Pf.D("vecTileParsed.builds.found",this.LP,this),f.Pf.hR(!1,this.ra));this.hp(null);this.Ug.setMap(null);this.pn();this.Rc=this.ra=null;this.dv()},VT:function(){this.ra.h("zoomchange",this.cB,this);this.ra.h("moveend",this.aK,this);this.ra.h("mapmove",this.cK,this);this.ra.h("movestart",this.bK,this);this.ra.h("dragstart",this.ZJ,this);this.ra.h("dragend",this.YJ,this);this.ra.h("resize",this.ok,this);this.ra.h("click",this.WJ, this);this.ra.h("dblclick",this.XJ,this);this.ra.h("mousemove",this.$J,this);this.cB();this.HB();this.Iz();this.jb.pc(this.ra);this.ij=new f.Yj.NG({zIndex:this.get("featureszIndex")||this.getzIndex(),map:this.ra,innerLayer:!0});this.qd=this.ij.S;f.Pf&&this.kS()&&f.Pf.h("vecTileParsed.builds.found",this.LP,this);this.cursorChanged();this.MT();this.zc=new f.KS(this.ra,this.jb);this.zc.lR(f.l.Oc?2:1);this.zc.H9=this.sL;this.zc.h("render",this.jw,this);this.pn();this.pW();this.disableHoverMarkerChanged(); this.iconSizeOffsetChanged();this.labelSizeOffsetChanged();this.disableIconRenderChanged()},disableHoverMarkerChanged:function(){this.Ug&&this.Ug.setMap(this.zg||this.get("disableHoverMarker")?null:this.ra)},r_:function(){this.WA(!1);var a=this.ij;setTimeout(function(){a.setMap(null)},0);this.qd=this.ij=null},MT:function(){this.ij.setMap(this.ra);this.qd=this.ij.S;this.WA(!0)},WA:function(a){if(this.qd){var b=this.qd.yr,c=this.get("indoorEvents")||[];f.g.isArray(c)?(0>c.indexOf("click")&&c.push("click"), f.l.W||(0>c.indexOf("mouseover")&&c.push("mouseover"),0>c.indexOf("mouseout")&&c.push("mouseout"))):c=c.split(" ");a=a?b.h:b.D;for(var d=0,e=c.length;d<e;d++)a.call(b,c[d],this.kW,this)}},cB:function(){if(this.li()){var a=this.ra.get("zoom");if(f.l.W){var b=this,c=a+this.zc?this.zc.pk:0;this.jb.forEach(function(a){b.OU(a.id,c)})}this.qd&&this.qd.L&&Math.floor(a)===a&&this.qd.L.zoom!==a&&(this.qd.L.zoom=a,this.qd.L.M=this.ra.get("resolution",a));this.pn({CO:!0});this.HB()}},EJ:function(a,b){if(!a)return!1; "object"!==typeof a&&(a=this.jb.df({id:a}));var c=this.yA(),d=this.jb.Ii(a);if(b&&this.ra){var e=this.ra.view.getResolution();b=b.Nc(e);c=new f.ne(c.ub.add(b),c.uc.Oa(b))}return c&&d?c.te(d,0):!1},OU:function(a,b){var c=this.jb.df({id:a});this.EJ(c)||this.fI(a,b)},fI:function(a,b){var c=this.jb.df({id:a});c&&this.jb.J1(c,void 0,b)},yL:function(){this.QB&&clearTimeout(this.QB);var a=this;a.QB=setTimeout(function(){a.QB=null;a.as=!1},300)},cK:function(){this.as=!0;this.yL()},bK:function(){this.as=!0; this.yL()},aK:function(){this.pn({CO:!0});this.as=!1},WT:function(){var a=this.getVisibleBuildingIds();a&&1===a.length&&this.setSelectedBuildingId(a[0])},ZJ:function(){},YJ:function(){},GW:function(){this.vJ=!0;var a=this;setTimeout(function(){a.vJ=!1},0)},WJ:function(){this.vJ||(this.w("map_click"),this.eV({id:0},200))},XJ:function(){this.IC()},eV:function(a,b){var c=this;this.IC();this.pv=setTimeout(function(){c.pv=null;c.Is(a)},b||300)},IC:function(){this.pv&&(clearTimeout(this.pv),this.pv=null)}, HB:function(){var a=!this.li()||!this.get("visible");if(!a&&this.ra)var a=this.ra.get("zoom"),b=this.get("zooms"),a=a<b[0]||a>b[1];this.zg!==a&&(this.dv(),this.zg=a,f.Pf&&f.Pf.hR(!this.zg,this.ra),this.disableHoverMarkerChanged(),this.WA(!this.zg),this.pn(),this.zg&&(this.hp(null),this.eM(null)),this.jw());this.Iz()},setSelectedBuildingId:function(a){f.e.add(this.CLASS_NAME,"setSelectedBuildingId");this.Is({id:a})},Is:function(a){this.IC();if(this.ti!==a.id){if(this.ti){var b=this.jb.df(this.ti); b&&(b.mw=!1,this.fI(b.id))}this.w("selectedBuildingIdChanged",{oldId:this.ti,newId:a.id});this.ti=a.id;if(a=this.jb.df(a.id))a.mw=!0;this.ok()}this.pn()},Iz:function(){if(this.ra&&!f.l.W)for(var a=this.ra.get("zoom"),b=[this.ra],c=!this.zg&&this.vs&&0<this.vs.length,d=0,e=b.length;d<e;d++)if(b[d]){var g=b[d].get("zooms");g&&(c?20>g[1]&&(b[d].set("zooms",[g[0],20]),b[d].WP=g[1]):18<g[1]&&a<g[1]&&b[d].set("zooms",[g[0],b[d].WP||g[1]]))}},OV:function(a){if(!this.ti)return!1;var b=this.jb.df(this.ti); return!b||!b.Rn||a&&a.CO&&!this.EJ(b,new f.G(30,30))?!1:{id:b.id,Vb:b.Vb||b.tj,u3:this.qU(b.Ll.cc)}},qU:function(a){return f.extend({},a,{xD:a.floor_indexs,w3:a.floor_nonas,v3:a.floor_names})},MW:function(){var a=this.Tg;a&&(a.h("floorChanged",function(a){this.fG(a.s1,a.Pn,function(){})},this),a.h("visible",function(){a&&this.w("floorBarVisibleChanged",{bba:a,visible:a.get("visible")})},this))},getFloorBar:function(){return this.Tg},getFeaturesLayer:function(){return this.ij},pn:function(a){!this.li()|| this.get("hideFloorBar")||this.zg?this.Tg&&this.Tg.hide():(a=this.OV(a),this.Tg||(this.Tg=new f.dH(this.get(f.l.W?"floorBarOptionsForMobile":"floorBarOptions")),this.MW(),this.ra.addControl(this.Tg)),this.Tg.set("floorData",a),a?this.Tg.show():this.Tg.hide())},sZ:function(a){var b=a.sn;if(!b)return null;var c=b.cc;if(!c)return null;var d=null;c.cpid&&(d=this.jb.AC(b));return{building_id:c.Ym,floor:c.yV,lnglat:a.fe||a.lnglat,shop:d}},$J:function(a){a=a.fe||a.lnglat;a&&this.SJ&&a.Ob(this.SJ)||(this.SJ= a,this.wI(a))},wI:function(a,b){function c(){d.eA=null;d.hB&&a?(d.Ug.show(),d.Ug.setPosition(a)):d.Ug.hide()}this.eA&&clearTimeout(this.eA);this.Ug.get("visible")&&this.Ug.hide();var d=this;b?c():this.eA=setTimeout(c,100)},hp:function(a,b,c){this.get("disableIndoorMouseoverHighlight")&&(a=null);var d=null;this.tp=null;a&&(a.cc?a.cc.pid||("floor"===a.cc.fk&&(a=this.jb.G3(a.cc.Ym))&&(d=a),a=null):a=null);a&&!d&&(d=a.cc.name||a.cc.name_cn);if(d)for(var e=["\\u8f85\\u52a9\\u9762"],g=0,h=e.length;g<h;g++){if(0<= d.indexOf(e[g])){a=d=null;break}}else a=null;if(a)switch(a.cc.fk){case "shops":this.tp=a}this.Ug&&(d?(this.hB!==d&&(this.hB=d,this.Ug.setContent(\'<div class="amap-indoor-map-moverf-marker">\'+d+"</div>")),this.wI(c.fe||c.lnglat,!0)):(this.hB=null,this.Ug.hide(),this.Ug.setContent("")));this.E_(b)},E_:function(a){this.GG&&f.g.ag(this.GG);this.GG=f.g.ec(function(){this.GG=null;this.oL(a)},this)},kW:function(a){if(this.zg)console.warn("Layer is hidden");else{var b=this.sZ(a);if(!b)this.hp(null),b=null; else if(b.building_id){a.R$=!0;a.type||(a.type=a.type);var c=b.building_id,d="click"===a.type,e="mouseover"===a.type,g="mouseout"===a.type;if(d||e)d&&this.GW(),this.ti!==c&&this.Is({id:b.building_id});e?(this.SB("default"),this.hp(a.sn,c,a,b)):g&&(this.SB(this.get("cursor")),this.hp(null))}f.event.J(this,a.type,b||a)}},jw:function(a){this.RB&&clearTimeout(this.RB);var b=this;this.RB=setTimeout(function(){b.RB=null;b.ok()},a||100)},ah:function(){if(!this.zJ)return null;var a=de.qf.ah.apply(this,arguments), b=this;setTimeout(function(){b.mapChanged()},0);return a},uv:function(){return this.get("map")},GV:function(){var a=this.uv();return a?a.map:null},Q$:function(){var a=this.uv();return a?f.Pf.EN(a):null},qV:function(a,b){var c=this.ra.view.getResolution(),d=a.jg(),e=b.jg(),g=this.ra.get("size"),h=Math.abs(d.y-e.y)/c;return Math.abs(d.x-e.x)/c>3*g.width||h>3*g.height},TI:function(){if(this.zg||!this.li())return[];var a=this.yA(),b=[],c=[];a&&this.jb.forEach(function(d,e){if(this.jb.mE(d)){var k=this.jb.Ii(d); k&&(a.te(k,0)?b.push(d.id):f.l.W&&this.qV(a,k)&&c.push(e))}},this);if(c.length)for(var d=0,e=c.length;d<e;d++)this.jb.h7(c[d]);return b},ok:function(){this.jr||(this.qy=f.g.ec(this.O_,this),this.jr=!0)},XI:function(a){return a.tj||a.Vb||1},li:function(){return!(!this.ra||!this.Rc)},x0:function(a){if(this.li()){var b=this;setTimeout(function(){a.call(b)},0)}else this.ws||(this.ws=[]),this.ws.push(a)},pW:function(){if(this.ws){var a=this.ws;this.ws=null;for(var b=0,c=a.length;b<c;b++)a[b].call(this)}}, EB:function(a){this.li()&&!this.zg&&(a||this.kS()&&(a=f.Pf.E3(this.ra)),a&&a.length&&this.jb.j5(a))},fG:function(a,b,c,d){d=f.extend({ZR:!0},d);var e=this;if(this.li()){var g=!1,h=this.Tg,k=this.jb.df(a);h&&(k&&this.jb.QO(k,b)||(g=!0),g&&h.fR(a,b,!0));var l=function(b,e){var g;g=b?{status:1,error:b}:{status:0,building:this.jb.AD(e)};f.extend(g,{id:a});!1!==d.ZR&&f.event.J(this,"floor_complete",g);c&&c.call(this,b,e,g)};this.jb.DE({id:a,OQ:b},function(c,d){!c&&b&&(d.Vb=b);g&&h.fR(a,b,!1);c?l.call(e, c,d):(e.hp(null),e.ok(),e.Is(d),l.call(e,null,d))})}else{var m=Array.prototype.slice.call(arguments,0);this.x0(function(){this.fG.apply(this,m)})}},B_:function(a){return!this.li()||a&&a.rda&&(a=this.Rc,a.Sg||a.Mh||a.Hh&&this.as)?!1:!0},O_:function(){this.Rc&&this.Rc.set("display",0)},GC:function(){var a=this.ra;if(a){if(this.get("alwaysShow"))return!0;a.getLayers();for(var b in a.map.Ma)if(f.S.hi&&a.map.Ma[b]instanceof f.S.hi)return!0;return!1}},render:function(a){if(this.GC())if(this.qy&&f.g.ag(this.qy), this.jr=!1,this.EB(),this.B_()){var b=this.uA();b.lt=a;this.rL=this.XT++;this.u0(b.Nw,b);this.s_(b.Nw,b);this.eM(b.Nw);this.Er(this.yJ);this.Er(this.$r);this.Er(this.GA);this.Er(this.Dv);this.Iz()}else this.jw(500)},dv:function(){this.es=null},getRenderLabels:function(){if(!this.li()||this.get("disableLabelRender")||this.zg||0<this.zc.JD())return this.dv(),[];var a=this.uA(),b=[];if(this.es&&this.es.result.rZ===this.get("opacity")&&this.es.Q9===a.key)b=this.es.result;else{for(var c=a.Nw,b=[],d=0, e=c.length;d<e;d++){var g=c[d];g.Vb||(g.Vb=this.XI(g));g=this.zc.e4(g,a);b.push.apply(b,g)}b&&0<b.length&&0===this.zc.JD()&&(b.rZ=this.get("opacity"),this.es={Q9:a.key,result:b})}b.FP=this.TI();return b},getVisibleBuildingIds:function(){f.e.add(this.CLASS_NAME,"getVisibleBuildingIds");return this.vs||[]},getBuildingInfoById:function(a){return this.jb.F3(a)},eM:function(a){var b=[];if(a&&!this.zg)for(var c=0,d=a.length;c<d;c++)this.jb.mE(a[c])&&b.push(a[c].id);b.sort();a=this.vs||[];this.vs=b;f.Pf&& f.Pf.d8(b,this.ra);a.join(",")!==b.join(",")&&(this.w("visibleBuildingChanged",{oldIds:a,newIds:this.vs}),this.WT())},uA:function(){for(var a=this.TI(),b=[],c=[],d=[],e=0,g=a.length;e<g;e++){var h=this.jb.df(a[e]);h?(b.push(h),d.push(h.id),c.push(h.id+"_"+h.Vb+(h.mw?"_sel":""))):console.warn("Can not find bld: ",a[e])}c.sort();this.li()?(a=this.yA(),e=this.ra.get("zoom")):(a=new f.ne(0,0,0,0),e=0);return{Nw:b,taa:d,la:a,zoom:e,key:e+";"+a.toString()+";"+c.join(",")}},u0:function(a){var b,c,d=[];b= 0;for(c=a.length;b<c;b++)d.push(a[b].id+"_"+a[b].Vb);b=d.sort().join(";");if(this.qd.w0!==b){this.qd.w0=b;this.qd.clear();var e=this;this.qd.ZB&&f.g.v1(this.qd.ZB);this.qd.ZB=f.g.G7(function(){e.qd&&(e.qd.ZB=null,e.k_(a))})}},k_:function(a){for(var b=[],c=0,d=a.length;c<d;c++){var e=a[c];if(e=this.jb.Dk(e,e.Vb,!0))e.zj&&b.push(e.zj),b.push.apply(b,e.Ea)}this.qd.vn(b)},yA:function(){return this.ra?this.ra.get("coordsBound"):null},SU:function(a,b){if(0===(this.ra.get("rotateEnable")?parseInt(this.ra.get("rotation"), 10)%360:0))return this.ra.he(a,b);var c=this.ra;a=a.Gb();var d=c.h2(a),e=c.get("center");-180>e.N-d.N?a.x-=f.g.Ra:180<e.N-d.N&&(a.x+=f.g.Ra);d=c.get("centerCoords");d=a.Oa(d).Rb(1<<20-b);return c.get("size").br().Rb(2).add(new f.G(d.x*Math.cos(0)-Math.sin(0)*d.y,Math.sin(0)*d.x+Math.cos(0)*d.y))},pL:function(a,b,c){if(!a)console.warn("Empty image");else if(f.g.isArray(a))for(var d=0,e=a.length;d<e;d++)this.pL(a[d],b,c);else if(!a.ud||c.P9.te(a.ud,0)){var g=a.va;"function"===typeof g&&(g=g(a));g&& (g.Jb=this.rL,d=a.Gc,d=this.SU(new f.G(d[0],d[1])),a={position:"absolute",width:Math.round(a.width)+"px",height:Math.round(a.height)+"px",left:Math.ceil(d.x)+"px",top:Math.ceil(d.y)+"px"},f.extend(g.style,a),g.parentNode!==b&&(b.appendChild(g),c.Eq&&!f.l.W&&(g.style.opacity=c.Eq,f.To.uM(g,1E3),setTimeout(function(){g.style.opacity=1},0))))}},tL:function(a,b,c){f.f.Qj(a,b||a.width,c||a.height,!0)},t_:function(a,b,c){this.tn?c.Je&&this.tL(this.tn):(this.tn=document.createElement("canvas"),this.$r.appendChild(this.tn)); this.Jp?c.Je&&this.tL(this.Jp):(this.Jp=document.createElement("canvas"),this.Dv.appendChild(this.Jp));c=[{Nn:this.zc.U2,H:this.$r,RC:[a,b,this.tn,{Je:c.Je}]},{Nn:this.zc.T2,H:this.$r,RC:[a,b,this.tn,{Je:!1}]},{disable:this.get("disableLabelRender")||b.lt&&b.lt.FF,Nn:this.zc.W2,H:this.Dv,RC:[a,b,this.Jp,{Je:c.Je}]}];this.JB(a,b,c)},JB:function(a,b,c){for(var d=0,e=c.length;d<e;d++)if(!c[d].disable){var g=c[d].RC||[a,b,!0];c[d].zN&&g.push.apply(g,c[d].zN);(g=c[d].Nn.apply(this.zc,g))&&this.pL(g,c[d].H, {saa:a.id,Eq:c[d].Eq,P9:b.la,zoom:b.zoom})}},oL:function(a,b){"string"===typeof a&&(a=this.jb.df(a));b||(b=this.uA());var c=!0;a&&!this.as&&this.tp||(c=!1);this.tp&&c&&(this.zc.By(this.tp,b.zoom+this.zc.pk,{Ko:"polygon"}),this.tp.style||(c=!1));c?(this.sJ||(this.sJ=document.createElement("canvas")),c=this.get("shopHighlightCoverStyle")||this.dV,c.xi||(c.xi="highlight"),c=[{Nn:this.zc.X3,zN:[{canvas:this.sJ,Ea:[f.extend(new f.Te,this.tp,{style:c})]}],H:this.GA,Eq:0.1}],this.JB(a,b,c)):this.Er(this.GA, -1)},u_:function(a,b){var c=[{Nn:this.zc.Z3,H:this.yJ},{Nn:this.zc.Y3,H:this.$r,Eq:0.1},{disable:this.get("disableLabelRender")||b.lt&&b.lt.FF,Nn:this.zc.d4,H:this.Dv,Eq:0.1}];this.JB(a,b,c);f.l.W||this.oL(a,b)},y0:function(a,b){var c=this.ra.view.getResolution(b.zoom),d=8E5;"undefined"!==typeof screen&&screen.width&&screen.height&&(d=screen.width*screen.height*1.3);for(var e=0,g=a.length;e<g;e++){var h=this.jb.Ii(a[e]);if(h){var k=h.Ef()/c,h=h.Bf()/c;if(k*h>d)return!0}}return!1},s_:function(a,b){var c= this.sL;c&&this.y0(a,b)&&(c=!1);for(var d=0,e=a.length;d<e;d++){var g=a[d];g.Vb||(g.Vb=this.XI(g));c?this.u_(g,b):this.t_(g,b,{Je:0===d})}},Er:function(a,b){if(a){b=b||this.rL;for(var c=Array.prototype.slice.call(a.childNodes,0),d=c.length-1;0<=d;d-=1){var e=c[d];e&&e.Jb!==b&&a.removeChild(e)}}}});window.AMap.IndoorMap=de; ')
_jsload_('vt', 'f.S.Xo=f.S.of.extend({C:function(a,b){arguments.callee.Ba.apply(this,arguments);this.yg=this.xg=this.Ch=!1;this.vh("tileFun");this.Ad=a.Ad;this.Ad=17;this.Cf=function(a,b,e){return f.r.Zb+"://vdata.amap.com/traffic?t="+f.g.ix(a,b,e)+"&w="+(new Date).getTime()}},getTileFun:function(){return this.Cf},Ek:function(){this.ca=f.l.ca&&this.get("detectRetina");this.Sa=Math.min(2,window.devicePixelRatio||1);this.Fc=256;return{Fc:this.get("tileSize"),visible:this.get("visible"),B:this.FD(),Pc:this.get("zooms"), Ow:!1,xg:!1,yg:!1,opacity:this.get("opacity"),Cf:this.get("tileFun"),Oc:!1,Ns:this.Qa.get("alwaysRender")}},qj:function(a){if(f.L.canvas.Xo)return new f.L.canvas.Xo(this,a)}});f.S.Xo.nb({Fn:function(a){return new f.qb.mT(this,a)}});f.L.canvas.Xo=f.L.Ng.extend({C:function(a,b){arguments.callee.Ba.apply(this,arguments);this.se();this.Ad=a.Ad},se:function(){this.na=document.createElement("canvas");this.na.className=this.q.Qa.get("className")},kg:function(){return this.na},qm:function(a){var b=this,c=a.ka;this.qa.Mc(a.key)||(this.qa.set(a.key,a),a.status="loading");var d=a.url,e;if(17<c.z){var g=Math.pow(2,c.z-17),h=Math.floor(c.x/g),k=Math.floor(c.y/g),l="17/"+h+"/"+k;if(e=this.qa.get(l)){if(a.status=e.status,a.va=e.va,"loaded"=== a.status){b.set("display");return}}else e=this.fm(new f.zh(17,h,k)),this.qa.set(l,e),d=e.url,a=e,a.zG=!0,c=e.ka}d=new f.Aa.Pa(d,{callback:"callback"});d.h("complete",function(d){if(b.q){a.status="loaded";a.va=!0;a.Da=d.data?d.data[f.g.ix(c.x,c.y,c.z).join("_")]:[];if(a.zG)for(d=18;d<=(f.l.W?20:18);d+=1){g=Math.pow(2,d-17);for(var e=0;e<g;e+=1)for(var h=0;h<g;h+=1){var k=this.qa.get(d+"/"+(g*c.x+e)+"/"+(g*c.y+h));k&&(k.status="loaded",k.va=!0)}}b.Ig=!0;b.no+=1;!b.q.Ja&&b.no>=b.Ok&&(b.q.Ja=!0,b.q.wd? b.q.da("renderComplete"):(b.q.wd=!0,b.q.da("complete")));b.q.set("display")}},b);d.h("error",function(){a.status=null},b)},dc:function(a,b){if(this.Md&&(a.nG||!b.Ns&&a.ve||a.Zd))this.zoom=a.V.zoom,this.La=a.V.La,this.hd(a,b,!0);else{this.Oj(a,b);this.ol=[];this.Ch=this.Ig=!1;var c=this.q.ca?this.q.Sa:1,d,e;0!==a.V.rotation?(d=2*Math.floor(a.V.la.tb.x)*c,e=2*Math.floor(a.V.la.tb.y)*c):(d=a.size.width*c,e=a.size.height*c);f.f.Qj(this.na,d,e,!0);this.VR=a.V.la.ub;this.Jb+=1;d=this.th;var g;this.Md=this.zoom; this.ja=this.La;this.A7=this.M;if(d.length){d=d[0];if(d.length){var h;for(e=d.length-1;0<=e;e-=1){g=d[e];h=g.ka;var k=Math.pow(2,this.zoom-h.z),l=(this.M*k*this.q.Fc*h.x-this.VR.x)/this.M;h=(this.M*k*this.q.Fc*h.y-this.VR.y)/this.M;g.Zo=1;this.d3(g.Da,l*c,h*c,k*c)}}this.ol=d}this.hd(a)}},d3:function(a,b,c,d){if(a&&a.length)for(var e=this.na.getContext("2d"),g=this.q.ca?this.q.Sa:1,h=0;h<a.length;h+=1)if(a[h].length){var k;switch(h){case 2:k="#33b100";break;case 1:k="#ffcc00";break;case 0:k="#de0000"; break;case 3:k="#8c0e0e";break;case 4:k="#adadad"}e.strokeStyle=k;e.shadowBlur=1;e.shadowColor="#fff";for(var l=0;l<a[h].length;l+=1){var m=a[h][l],n=0.75*m[0],m=m[1];if(0!==m.length){e.lineWidth=n*g;e.lineJoin="round";e.beginPath();for(n=0;n<m.length;n+=1)for(var p=f.g.yG(m[n]),q=0;q<p.length;q+=2)0===q?e.moveTo(b+p[0]*d,c+p[1]*d):e.lineTo(b+p[q]*d,c+p[q+1]*d);e.stroke()}}}},hd:function(a){var b=Math.pow(2,this.zoom-this.Md),c=this.La.Oa(this.ja).Rb(this.A7),d=this.q.ca?this.q.Sa:1;this.transform= {translate:new f.G((a.V.la.tb.x+c.x)*d,(a.V.la.tb.y+c.y)*d),scale:b/d,rotate:0}}}); ')
_jsload_('AMap.ToolBar', 'f.kT=f.Y.extend({ia:[f.ga],C:function(a){this.CLASS_NAME="AMap.ToolBar";f.e.hb(this.CLASS_NAME,a);this.yf(a||{});this.a={};this.a.H=f.f.create("div",null,"amap-toolbar");this.a.so=f.f.create("div",this.a.H,"amap-pancontrol");this.a.left=f.f.create("div",this.a.so,"amap-pan-left");this.a.top=f.f.create("div",this.a.so,"amap-pan-top");this.a.right=f.f.create("div",this.a.so,"amap-pan-right");this.a.bottom=f.f.create("div",this.a.so,"amap-pan-bottom");this.a.zd=f.f.create("div",this.a.H,"amap-locate"); this.a.zoom=f.f.create("div",this.a.H,"amap-zoomcontrol");this.a.Yk=f.f.create("div",this.a.zoom,"amap-zoom-plus");this.a.hf=f.f.create("div",this.a.zoom,"amap-zoom-ruler");this.a.Tk=f.f.create("div",this.a.zoom,"amap-zoom-minus");this.a.Nx=f.f.create("div",this.a.hf,"amap-zoom-mask");this.a.cursor=f.f.create("div",this.a.hf,"amap-zoom-cursor");this.a.labels=f.f.create("div",this.a.hf,"amap-zoom-labels");this.a.street=f.f.create("div",this.a.labels,"amap-zoom-label-street");this.a.city=f.f.create("div", this.a.labels,"amap-zoom-label-city");this.a.sQ=f.f.create("div",this.a.labels,"amap-zoom-label-province");this.a.country=f.f.create("div",this.a.labels,"amap-zoom-label-country");(this.Fl=(this.k0=f.l.W)||a&&a.liteStyle)?(this.n8(),this.position="RB",this.offset=new f.G(10,110)):f.f.wa(this.a.so,{position:"relative"}).wa(this.a.zd,{position:"relative",left:"17px"}).wa(this.a.zoom,{position:"relative",left:"14px"});this.rb(a);this.pC&&this.eC()},yf:function(a){this.I9=a.useNative||!1;this.Lh="toolbar"; this.qR=this.zd=this.direction=this.hf=this.visible=!0;this.position="LT";this.offset=new f.G(10,10);this.pC=!1;this.timeout=a.timeout||5E3;this.n5=f.r.Fb+"/theme/v1.3/small_loading.gif";this.Qk=new Fc({position:this.We,offset:new f.G(-11,-11),content:"<div style=\'width:23px;height:23px;overflow:hidden;\'><img style=\'position:relative;cursor:pointer;\' width=\'23px\' height=\'23px\' src=\'"+f.r.Gf+"/loc.png\'></div>"});this.Qk.ma=!0},wn:function(a,b){this.map=a;b.appendChild(this.a.H);this.vd=b;this.lM(); this.si();var c=this;setTimeout(function(){c.map&&c.VK()},0)},xo:function(){this.yi();this.vd.removeChild(this.a.H);this.map=this.vd=null;this.dC()},n8:function(){var a=f.f.create("div",this.a.Yk);a.innerHTML="&#43;";f.f.za(this.a.Yk,"amap-zoom-plus");f.f.ta(this.a.Yk,"amap-zoom-touch-plus");f.f.za(this.a.zd,"amap-locate");f.f.ta(this.a.zd,"amap-geo amap-toolbar-geo");a=f.f.create("div",this.a.Tk);a.innerHTML="&#8722;";f.f.za(this.a.Tk,"amap-zoom-minus");f.f.ta(this.a.Tk,"amap-zoom-touch-minus"); f.f.ta(this.a.H,"amap-touch-toolbar")},o8:function(a){a.direction=!1;!0!==a.locate&&(a.locate=!1);a.ruler=!1;return a},rb:function(a){a=a||{};this.Fl&&(a=this.o8(a));for(var b in a)a.hasOwnProperty(b)&&"_"!==b.substr(0,1)&&void 0!==this[b]&&(this[b]=a[b]);this.offset=void 0!==a.offset?a.offset:this.offset;this.position=void 0!==a.position?a.position:this.position;this.hf=void 0!==a.ruler?a.ruler:this.hf;this.zd=void 0!==a.locate?a.locate:this.zd;this.direction=void 0!==a.direction?a.direction:this.direction; this.pC=void 0!==a.autoPosition?a.autoPosition:this.pC;void 0!==a.locationMarker&&(this.Qk.getMap===this.map&&(this.Qk.setMap(null),a.locationMarker.setPosition(this.Qk.getPosition()),a.locationMarker.setMap(this.map)),this.Qk=a.locationMarker);this.qX();this.position&&this.offset&&this.Bs(this.position,this.offset);this.direction?f.f.wa(this.a.so,{display:"block"}):f.f.wa(this.a.so,{display:"none"});this.zd?f.f.wa(this.a.zd,{display:"block"}):f.f.wa(this.a.zd,{display:"none"});!this.hf||this.map&& 270>this.map.getSize().getHeight()?f.f.wa(this.a.hf,{display:"none"}):f.f.wa(this.a.hf,{display:"block"});this.visible?f.f.wa(this.a.H,{visibility:"visible"}):f.f.wa(this.a.H,{visibility:"hidden"})},ND:function(a){return this[a]},Bs:function(a,b){switch(a){case "LT":f.f.wa(this.a.H,{left:b.xd()+"px",top:b.Lc()+"px",right:"",bottom:""});break;case "RT":f.f.wa(this.a.H,{right:b.xd()+"px",top:b.Lc()+"px",left:"",bottom:""});break;case "LB":f.f.wa(this.a.H,{left:b.xd()+"px",bottom:b.Lc()+"px",right:"", top:""});break;case "RB":f.f.wa(this.a.H,{right:b.xd()+"px",bottom:b.Lc()+"px",left:"",top:""})}this.vd&&(this.vd.removeChild(this.a.H),this.vd.appendChild(this.a.H))},VK:function(){this.Pc=null;this.lM();this.TB(this.map.get("zoom"))},si:function(){this.TB(this.map.get("zoom"));this.oa={Pc:f.event.addListener(this.map,"zooms",this.VK,this),left:f.event.R(this.a.left,"click",this.gY,this),top:f.event.R(this.a.top,"click",this.XY,this),right:f.event.R(this.a.right,"click",this.CY,this),bottom:f.event.R(this.a.bottom, "click",this.NX,this),zd:f.event.R(this.a.zd,"click",this.jY,this),Bca:f.event.R(this.a.H,"mousedown",function(a){f.A.preventDefault(a)},this),Vaa:f.event.R(this.a.cursor,"mousedown",this.kn,this),Oaa:f.event.R(this.a.cursor,"mouseover",this.YX,this),Naa:f.event.R(this.a.cursor,"mouseout",this.ZX,this),Taa:f.event.R(document,"mousemove",this.hn,this),Uaa:f.event.R(document,"mouseup",this.jn,this),cursor:f.event.R(this.a.cursor,"click",this.XX,this),Yk:f.event.R(this.a.Yk,"click",this.zY,this),Tk:f.event.R(this.a.Tk, "click",this.kY,this),oda:f.event.R(this.a.hf,"mouseover",this.LK,this),kea:f.event.R(this.a.zoom,"mouseout",this.KK,this),Wba:f.event.R(this.a.labels,"mouseover",this.LK,this),Vba:f.event.R(this.a.labels,"mouseout",this.KK,this),hf:f.event.R(this.a.hf,"click",this.UY,this),street:f.event.R(this.a.street,"click",this.WY,this),city:f.event.R(this.a.city,"click",this.RX,this),sQ:f.event.R(this.a.sQ,"click",this.AY,this),country:f.event.R(this.a.country,"click",this.WX,this),oS:f.event.addListener(this.map, "zoomend",this.xl,this),Lda:f.event.R(this.a.H,"touchstart",f.g.BN,f.A.stopPropagation),resize:f.event.addListener(this.map,"resize",this.BY,this)};f.l.ih&&(this.oa.Yba=f.event.R(this.a.left,"mouseover",this.iY,this),this.oa.Jda=f.event.R(this.a.top,"mouseover",this.ZY,this),this.oa.cda=f.event.R(this.a.right,"mouseover",this.FY,this),this.oa.vaa=f.event.R(this.a.bottom,"mouseover",this.PX,this),this.oa.Xba=f.event.R(this.a.left,"mouseout",this.hY,this),this.oa.Ida=f.event.R(this.a.top,"mouseout", this.YY,this),this.oa.bda=f.event.R(this.a.right,"mouseout",this.EY,this),this.oa.uaa=f.event.R(this.a.bottom,"mouseout",this.OX,this))},YX:function(){this.a.cursor.style.top=parseInt(this.a.cursor.style.top)-2+"px"},ZX:function(){this.a.cursor.style.top=parseInt(this.a.cursor.style.top)+2+"px"},yi:function(){if(this.oa)for(var a in this.oa)this.oa.hasOwnProperty(a)&&f.event.removeListener(this.oa[a])},gY:function(){this.map.panBy(this.map.getSize().width/2-1,0)},NX:function(){this.map.panBy(0,-this.map.getSize().height/ 2+1)},CY:function(){this.map.panBy(-this.map.getSize().width/2+1,0)},iY:function(){this.a.left.className+=" amap-pan-left-hover"},FY:function(){this.a.right.className+=" amap-pan-right-hover"},ZY:function(){this.a.top.className+=" amap-pan-top-hover"},PX:function(){this.a.bottom.className+=" amap-pan-bottom-hover"},hY:function(){this.a.left.className=this.a.left.className.replace(" amap-pan-left-hover","")},EY:function(){this.a.right.className=this.a.right.className.replace(" amap-pan-right-hover", "")},YY:function(){this.a.top.className=this.a.top.className.replace(" amap-pan-top-hover","")},OX:function(){this.a.bottom.className=this.a.bottom.className.replace(" amap-pan-bottom-hover","")},XY:function(){this.map.panBy(0,this.map.getSize().height/2-1)},qX:function(){navigator.geolocation||(this.zd=!1)},lM:function(){this.Pc||(this.Pc=this.map?this.map.get("zooms"):[3,18]);this.qR=5<this.Pc[0]||17>this.Pc[1]?!1:!0},jY:function(){this.We?this.dC():this.eC()},haa:function(a,b){var c=f.r.xc+"/v3/assistant/coordinate/convert?coordsys=gps&s=rsv3&output=json", c=c+"&locations="+a.toString()+"&key="+f.r.key,c=new f.Aa.Pa(c,{callback:"callback"});c.h("complete",b,this);c.h("error",b,this)},eC:function(){if(navigator.geolocation){this.Fl||(this.a.fd||(this.a.fd=f.f.create("img",this.a.zd),this.a.fd.src=this.n5,f.f.wa(this.a.fd,{margin:(this.Fl?10:4)+"px"})),this.a.zd.appendChild(this.a.fd));f.f.ta(this.a.zd,"amap-locate-loading");var a=this;f.$a.load("AMap.Geolocation",function(){a.geolocation||(a.geolocation=new f.YG({useNative:this.I9,showButton:!1,showMarker:!1, showCircle:!1,panToLocation:!1,maximumAge:6E5}));a.geolocation.getCurrentPosition(function(b,c){f.f.za(a.a.zd,"amap-locate-loading");"complete"===b?(a.rX(c),f.event.J(a,"location-success",c)):(a.pX(),f.event.J(a,"location-failed",c))})})}},dC:function(){this.Fl?f.f.za(this.a.zd,"amap-toolbar-geo-secc"):f.f.wa(this.a.zd,{backgroundPosition:"-130px -185px"});this.xW();this.We=null},a0:function(){var a=this;if(this.We)if(this.cb=this.Qk,this.cb.setMap(this.map),this.Qk instanceof Fc&&this.Qk.setPosition(this.We), this.zr&&(this.Ca=new Dc({isCustom:!0,content:"<span style=\'display: block; width:80px;background: #fff;border: 1px solid blue;font-size: 12px;border-radius: 3px;\'>\\u5b9a\\u4f4d\\u7cbe\\u5ea6:"+this.zr+"\\u7c73</span>",offset:new f.G(25,0)}),this.cb.h("mouseover",function(){a.Ca.open(a.map,a.cb.getPosition())}),this.cb.h("mouseout",function(){a.Ca.close()})),this.zr){this.Za=new Gc({center:this.We,radius:this.zr,strokeColor:"#0093FF",strokeOpacity:0.3,strokeWeight:1,fillColor:"#02B0FF",fillOpacity:0.25}); this.Za.ma=!0;this.Za.setMap(this.map);var b=this.map.getSize(),b=Math.min(b.width,b.height)/4,b=Math.floor(Math.LOG2E*Math.log(b*Math.cos(this.We.getLat()*Math.PI/180)*12756274*Math.PI/256/this.zr));this.map.setZoomAndCenter(b,this.We)}else this.map.setCenter(this.We);f.event.J(this,"location",{type:"location",lnglat:this.We})},xW:function(){this.cb&&(this.cb.setMap(null),this.cb=null);this.Za&&(this.Za.setMap(null),this.Za=null);this.Qk.setMap(null)},$_:function(){this.qR&&this.a.labels&&f.f.wa(this.a.labels, {display:"block"})},wW:function(){this.a.labels&&f.f.wa(this.a.labels,{display:"none"})},mr:function(a,b){var c=b-a;c&&f.event.J(this,"zoomchanged",{type:0===c?void 0:0<c?"zoomin":"zoomout"})},TB:function(a){var b=+f.f.md(this.a.hf,"height").replace("px",""),c=this.Pc;a>c[1]&&(a=c[1]);a<c[0]&&(a=c[0]);b=c[0]===c[1]?0:Math.floor((b-10)*(c[1]-a)/(c[1]-c[0]));f.f.wa(this.a.Nx,{height:b+"px"});f.f.wa(this.a.cursor,{top:b+"px"});this.Fl?(a===c[1]?f.f.ta(this.a.Yk,"amap-zoom-touch"):f.f.za(this.a.Yk,"amap-zoom-touch"), a===c[0]?f.f.ta(this.a.Tk,"amap-zoom-touch"):f.f.za(this.a.Tk,"amap-zoom-touch")):(a===c[1]?f.f.ta(this.a.Yk,"amap-zoom-plus2"):f.f.za(this.a.Yk,"amap-zoom-plus2"),a===c[0]?f.f.ta(this.a.Tk,"amap-zoom-minus2"):f.f.za(this.a.Tk,"amap-zoom-minus2"))},nJ:function(){var a=+f.f.md(this.a.hf,"height").replace("px",""),b=this.Pc,c=+f.f.md(this.a.Nx,"height").replace("px","");return b[1]-Math.round((b[1]-b[0])*c/(a-10))},kn:function(a){this.map&&this.map.getStatus().zoomEnable&&(f.A.stopPropagation(a).preventDefault(a), this.y=f.A.Rh(a,this.a.zoom).Lc(),this.yb=+f.f.md(this.a.cursor,"top").replace("px",""),this.Mn=!0)},hn:function(a){if(this.Mn){f.A.stopPropagation(a).preventDefault(a);a=f.A.Rh(a,this.a.zoom).Lc()-this.y;a=this.yb+a;var b=+f.f.md(this.a.hf,"height").replace("px","");0<=a&&a<b-10&&(f.f.wa(this.a.cursor,{top:a+"px"}),f.f.wa(this.a.Nx,{height:a+2+"px"}))}},jn:function(){if(this.Mn){var a=this.map.get("zoom"),b=this.nJ();this.map.setZoom(b);this.mr(a,b);this.Mn=!1}},XX:function(a){f.A.stopPropagation(a).preventDefault(a)}, xl:function(){this.TB(this.map.get("zoom"))},zY:function(a){f.A.stopPropagation(a).preventDefault(a);this.map.zoomIn();f.event.J(this,"zoomchanged",{type:"zoomin"})},kY:function(a){f.A.stopPropagation(a).preventDefault(a);this.map.zoomOut();f.event.J(this,"zoomchanged",{type:"zoomout"})},LK:function(){this.cP=!0;this.$_()},KK:function(){this.cP=!1;var a=this;setTimeout(function(){a.cP||a.wW()},1E3)},UY:function(a){if(this.map&&this.map.getStatus().zoomEnable){a=f.A.Rh(a,this.a.hf).y;var b=+f.f.md(this.a.hf, "height").replace("px","");a>b-10&&(a=b-10);f.f.wa(this.a.cursor,{top:a+"px"}).wa(this.a.Nx,{height:a+"px"});a=this.map.get("zoom");b=this.nJ();this.map.setZoom(b);this.mr(a,b)}},WY:function(a){this.map&&this.map.getStatus().zoomEnable&&(f.A.stopPropagation(a).preventDefault(a),this.map.setZoom(17),a=this.map.get("zoom"),this.mr(a,17))},RX:function(a){this.map&&this.map.getStatus().zoomEnable&&(f.A.stopPropagation(a).preventDefault(a),this.map.setZoom(11),a=this.map.get("zoom"),this.mr(a,11))},AY:function(a){this.map&& this.map.getStatus().zoomEnable&&(f.A.stopPropagation(a).preventDefault(a),this.map.setZoom(7),a=this.map.get("zoom"),this.mr(a,7))},WX:function(a){this.map&&this.map.getStatus().zoomEnable&&(f.A.stopPropagation(a).preventDefault(a),this.map.setZoom(3),a=this.map.get("zoom"),this.mr(a,3))},BY:function(){this.rb({locate:this.zd})},rX:function(a){try{this.We=a.position,this.zr=a.accuracy,this.a.fd&&this.a.fd.parentNode&&this.a.fd.parentNode.removeChild(this.a.fd),this.Fl?f.f.ta(this.a.zd,"amap-toolbar-geo-secc"): f.f.wa(this.a.zd,{backgroundPosition:"-130px -211px"}),this.a0({locations:this.We+""})}catch(b){}},pX:function(){this.We=null;try{this.a.zd.removeChild(this.a.fd),this.Fl||f.f.wa(this.a.zd,{backgroundPosition:"-130px -185px"})}catch(a){}},getOffset:function(){f.e.add(this.CLASS_NAME,"getOffset");return this.offset},setOffset:function(a){f.e.add(this.CLASS_NAME,"setOffset");this.rb({offset:a})},hideRuler:function(){f.e.add(this.CLASS_NAME,"hideRuler");this.rb({ruler:!1})},showRuler:function(){f.e.add(this.CLASS_NAME, "showRuler");this.rb({ruler:!0})},hideDirection:function(){f.e.add(this.CLASS_NAME,"hideDirection");this.rb({direction:!1})},showDirection:function(){f.e.add(this.CLASS_NAME,"showDirection");this.rb({direction:!0})},hideLocation:function(){f.e.add(this.CLASS_NAME,"hideLocation");this.rb({locate:!1})},showLocation:function(){f.e.add(this.CLASS_NAME,"showLocation");this.rb({locate:!0})},hide:function(){f.e.add(this.CLASS_NAME,"hide");this.rb({visible:!1});f.event.J(this,"hide")},show:function(){f.e.add(this.CLASS_NAME, "show");this.rb({visible:!0});f.event.J(this,"show")},doLocation:function(){f.e.add(this.CLASS_NAME,"doLocation");this.We&&this.dC();this.eC()},getLocation:function(){f.e.add(this.CLASS_NAME,"getLocation");return this.We},hq:function(){var a=[0,0,0,0];if(this.a.H){var b=f.f.md(this.a.H,"width"),c=f.f.md(this.a.H,"height"),b=this.offset.xd()+parseFloat(b),c=this.offset.Lc()+parseFloat(c)+5;-1!==this.position.indexOf("T")&&(a[0]=c);-1!==this.position.indexOf("R")&&(a[1]=b);-1!==this.position.indexOf("B")&& (a[2]=c);-1!==this.position.indexOf("L")&&(a[3]=b)}return a}});window.AMap.ToolBar||(window.AMap.ToolBar=f.kT); ')
_jsload_('AMap.Scale', 'f.cT=f.Y.extend({ia:[f.ga,f.Gd],C:function(a){this.CLASS_NAME="AMap.Scale";f.e.hb(this.CLASS_NAME,a);this.position="LB";this.offset=new f.G(2,20);this.visible=!0;this.a={};this.a.H=f.f.create("div",null,"amap-scalecontrol");this.a.text=f.f.create("div",this.a.H,"amap-scale-text");this.a.zE=f.f.create("div",this.a.H,"amap-scale-line");this.a.Yaa=f.f.create("div",this.a.zE,"amap-scale-edgeleft");this.a.i3=f.f.create("div",this.a.zE,"amap-scale-edgeright");this.a.y5=f.f.create("div",this.a.zE,"amap-scale-middle"); this.rb(a)},wn:function(a,b){this.map=a;b.appendChild(this.a.H);this.vd=b;this.si()},xo:function(){this.yi();this.vd.removeChild(this.a.H);this.map=this.vd=null},rb:function(a){for(var b in a)"_"!==b.substr(0,1)&&void 0!==this[b]&&(this[b]=a[b]);this.position&&this.offset&&this.Bs(this.position,this.offset);this.visible?f.f.wa(this.a.H,{visibility:"visible"}):f.f.wa(this.a.H,{visibility:"hidden"})},ND:function(a){return this[a]},Bs:function(a,b){switch(a){case "LT":f.f.wa(this.a.H,{left:b.xd()+"px", top:b.Lc()+"px",right:"",bottom:""});break;case "RT":f.f.wa(this.a.H,{right:b.xd()+"px",top:b.Lc()+"px",left:"",bottom:""});break;case "LB":f.f.wa(this.a.H,{left:b.xd()+"px",bottom:b.Lc()+"px",right:"",top:""});break;case "RB":f.f.wa(this.a.H,{right:b.xd()+"px",bottom:b.Lc()+"px",left:"",top:""})}this.vd&&(this.vd.removeChild(this.a.H),this.vd.appendChild(this.a.H))},U_:function(a,b){this.a.text.innerHTML=a;f.f.wa(this.a.text,{width:b+8+"px"}).wa(this.a.y5,{width:b+"px"}).wa(this.a.i3,{left:b+1+"px"})}, wL:[[1E7,"10000"],[5E6,"5000"],[2E6,"2000"],[1E6,"1000"],[5E5,"500"],[2E5,"200"],[1E5,"100"],[1E5,"100"],[5E4,"50"],[2E4,"20"],[1E4,"10"],[5E3,"5"],[2E3,"2"],[1E3,"1"],[500,"500"],[200,"200"],[200,"200"],[100,"100"],[50,"50"],[20,"20"],[10,"10"]],si:function(){this.xl();this.oa={oS:f.event.addListener(this.map,"zoomend",this.xl,this),F5:f.event.addListener(this.map,"moveend",this.xl,this)};this.T("lang",this.map)},langChanged:function(){this.xl()},yi:function(){if(this.oa)for(var a in this.oa)this.oa.hasOwnProperty(a)&& f.event.removeListener(this.oa[a]);this.vh("lang")},xl:function(){var a=Math.round(this.map.get("zoom")),b=this.map.getResolution(),b=this.wL[a][0]/b,c=this.wL[a][1],c=13>=a?"en"==this.map.getLang()?c+" KM":"zh_en"==this.map.getLang()?c+" \\u516c\\u91cc/KM":c+" \\u516c\\u91cc":"en"==this.map.getLang()?c+" M":"zh_en"==this.map.getLang()?c+" \\u7c73/M":c+" \\u7c73";this.U_(c,b)},show:function(){f.e.add(this.CLASS_NAME,"show");this.rb({visible:!0});f.event.J(this,"show")},hide:function(){f.e.add(this.CLASS_NAME, "hide");this.rb({visible:!1});f.event.J(this,"hide")},hq:function(){var a=[0,0,0,0];if(this.a.H){var b=f.f.md(this.a.H,"width"),c=f.f.md(this.a.H,"height"),b=this.offset.xd()+parseFloat(b),c=this.offset.Lc()+parseFloat(c);-1!==this.position.indexOf("T")&&(a[0]=c);-1!==this.position.indexOf("R")&&(a[1]=b);-1!==this.position.indexOf("B")&&(a[2]=c);-1!==this.position.indexOf("L")&&(a[3]=b)}return a}});window.AMap.Scale=f.cT; ')
_jsload_('AMap.MouseTool', 'f.SS=f.Y.extend({ia:[f.ga],C:function(a){this.CLASS_NAME="AMap.MouseTool";this.rc=[];this.ha={};this.mj={};this.j=a;this.Fh(a);var b=this;window.AMap.plugin("AMap.RangingTool",function(){b.Jh=new f.lH(a);f.event.J(b,"rangingtool-loaded")});window.AMap.plugin("AMap.AutoPanby",function(){b.RH=new f.sS(a)})},Fh:function(a){this.j=a;this.ha={Wc:[],M6:[],L6:[],b7:[],I1:[],O7:[],kca:[],Sca:[],Tca:[]}},de:function(){return Math.round(1E5*Math.random())},pj:function(){for(;0<this.rc.length;)f.event.removeListener(this.rc.shift()); this.Jh&&this.Jh.turnOff()},marker:function(a){f.e.add(this.CLASS_NAME,"marker");this.j.set("allBubble",!0);this.pj();a=a||{bubble:!0};var b=this,c=this.j,d=this.ha.Wc;this.rc.push(f.event.addListener(c,"click",function(e){a.position=e.lnglat;e=new Fc(a);e.setMap(c);f.event.J(b,"draw",{obj:e});d.push(e)},c))},polyline:function(a){f.e.add(this.CLASS_NAME,"polyline");this.j.set("allBubble",!0);this.pj();a=a||{};var b=this,c=this.j,d=this.ha.M6,e=c.getStatus().doubleClickZoom,g=!1;this.rc.push(f.event.addListener(c, "click",function(b){if(!1===g)g=new Hc({path:[b.lnglat,b.lnglat],strokeColor:a.strokeColor||"#1791fc",strokeOpacity:a.strokeOpacity||0.8,strokeWeight:a.strokeWeight||2,strokeStyle:a.strokeStyle||"solid",strokeDasharray:a.strokeDasharray||[10,5],zIndex:a.zIndex||10,extData:a.extData||{},bubble:!0}),c.setStatus({doubleClickZoom:!1}),g.setMap(c),d.push(g);else{var e=g.getPath(),l=e.pop();e.push(b.lnglat,l);g.setPath(e)}},c));this.rc.push(f.event.addListener(c,"mousemove",function(a){if(g){var b=g.getPath(); b.pop();b.push(a.lnglat);g.setPath(b)}},c,c));this.rc.push(f.event.addListener(c,"dblclick",function(){if(g){var a=g.getPath();a.pop();g.setPath(a);2<=g.getPath().length?f.event.J(b,"draw",{obj:g}):g.setMap(null)}g=!1;c.setStatus({doubleClickZoom:e})},c));this.rc.push(f.event.addListener(c,"rightclick",function(){if(g){var a=g.getPath();a.pop();g.setPath(a);2<=g.getPath().length?(d.push(g),f.event.J(b,"draw",{obj:g})):g.setMap(null)}g=!1;c.setStatus({doubleClickZoom:e})},c))},polygon:function(a){f.e.add(this.CLASS_NAME, "polygon");this.j.set("allBubble",!0);this.pj();a=a||{};var b=this,c=this.j,d=this.ha.L6,e=c.getStatus().doubleClickZoom,g=!1;this.rc.push(f.event.addListener(c,"click",function(b){if(!1===g)g=new Ic({path:[b.lnglat,b.lnglat],strokeColor:a.strokeColor||"#1791fc",strokeOpacity:a.strokeOpacity||0.8,strokeWeight:a.strokeWeight||2,fillColor:a.fillColor||"#1791fc",fillOpacity:a.fillOpacity||0.35,strokeStyle:a.strokeStyle||"solid",strokeDasharray:a.strokeDasharray||[10,5],zIndex:a.zIndex||10,extData:a.extData|| {},bubble:a.bubble||!0}),c.setStatus({doubleClickZoom:!1}),g.setMap(c),d.push(g);else{var e=g.getPath(),l=e.pop();e.push(b.lnglat,l);g.setPath(e)}},c,this));this.rc.push(f.event.addListener(c,"mousemove",function(a){if(g){var b=g.getPath();b.pop();b.push(a.lnglat);g.setPath(b)}},c,this));this.rc.push(f.event.addListener(c,"dblclick",function(){if(g){var a=g.getPath();a.pop();g.setPath(a);2<g.getPath().length?f.event.J(b,"draw",{obj:g}):g.setMap(null)}g=!1;c.setStatus({doubleClickZoom:e})},this)); this.rc.push(f.event.addListener(c,"rightclick",function(){if(g){var a=g.getPath();a.pop();g.setPath(a);2<g.getPath().length?(d.push(g),f.event.J(b,"draw",{obj:g})):g.setMap(null)}g=!1;c.setStatus({doubleClickZoom:e})},this))},rectangle:function(a){f.e.add(this.CLASS_NAME,"rectangle");this.j.set("allBubble",!0);this.pj();a=a||{};var b=this,c=this.j,d=this.ha.b7,e=c.getStatus().dragEnable,g,h;this.rc.push(f.event.addListener(c,"mousedown",function(b){g||(h=b.lnglat,g=new Ic({path:[b.lnglat],strokeColor:a.strokeColor|| "#1791fc",strokeOpacity:a.strokeOpacity||0.8,strokeWeight:a.strokeWeight||2,fillColor:a.fillColor||"#1791fc",fillOpacity:a.fillOpacity||0.35,strokeStyle:a.strokeStyle||"solid",strokeDasharray:a.strokeDasharray||[10,5],zIndex:a.zIndex||10,extData:a.extData||{},bubble:a.bubble||!0}),g.setMap(c),d.push(g));c.setStatus({dragEnable:!1})},this));this.rc.push(f.event.addListener(c,"mousemove",function(a){g&&(a=a.lnglat,a=[h,new f.U(a.N,h.Q),a,new f.U(h.N,a.Q)],g.setPath(a))},this));this.rc.push(f.event.addListener(c, "mouseup",function(){g&&(f.event.J(b,"draw",{obj:g}),g=!1);c.setStatus({dragEnable:e})},this))},circle:function(a){f.e.add(this.CLASS_NAME,"circle");this.j.set("allBubble",!0);this.pj();a=a||{};var b=this,c=this.j,d=this.ha.I1;c.getStatus();var e;this.rc.push(f.event.addListener(c,"mousedown",function(g){function h(a){c.getSize();c.getSize();a=m.gg(a.lnglat);e.setRadius(a)}function k(){for(b.RH.f9();0<l.length;)f.event.removeListener(l.shift());d.push(e);f.event.J(b,"draw",{obj:e});e=null;c.setStatus({dragEnable:!0}); c.D("mousemove",h,this);f.A.D(document,"mouseup",k,this);c.D("mouseup",k,this)}if(!e){c.setStatus({dragEnable:!1});var l=[],m=g.lnglat;e=new Gc({center:g.lnglat,radius:1,strokeColor:a.strokeColor||"#1791fc",strokeOpacity:a.strokeOpacity||0.8,strokeWeight:a.strokeWeight||2,fillColor:a.fillColor||"#1791fc",fillOpacity:a.fillOpacity||0.35,strokeStyle:a.strokeStyle||"solid",strokeDasharray:a.strokeDasharray||[10,5],zIndex:a.zIndex||10,extData:a.extData||{},bubble:a.bubble||!0});b.RH.g9();e.setMap(c); l.push(f.event.addListener(c,"mousemove",h,this));l.push(f.event.addListener(c,"mouseup",k,this));l.push(f.event.R(document,"mouseup",k,this))}},this))},rule:function(a){function b(a){f.event.J(this,"draw",{obj:a.polyline})}f.e.add(this.CLASS_NAME,"rule");this.j.set("allBubble",!0);this.pj();this.XW=!0;this.Jh?(a&&this.Jh.rb(a),this.Jh.turnOn(),this.OB||(this.OB=f.event.addListener(this.Jh,"end",b,this))):f.event.oM(this,"rangingtool-loaded",function(){this.XW&&(a&&this.Jh.rb(a),this.Jh.turnOn(), this.OB||(this.OB=f.event.addListener(this.Jh,"end",b,this)))},this);return this.Jh},measureArea:function(a){function b(a){var b=document.createElement("div");b.style.cssText="position:relative;background-color:#FFFFFF;border:1px solid #4B4B4B;border-radius:3px 3px 3px 3px;box-shadow:2px 2px 8px #999999;padding:2px 7px;white-space:nowrap;";var g=a.getArea();b.innerHTML=1E5<g?(1E-6*g).toFixed(2)+"\\u5e73\\u65b9\\u516c\\u91cc":g.toFixed(1)+"\\u5e73\\u65b9\\u7c73";a=new Fc({position:a.getPath()[0],content:b, offset:new f.G(8,8),bubble:!0});a.ma=!0;a.id=c.de();e[a.id]=a;a.setMap(d)}f.e.add(this.CLASS_NAME,"measureArea");this.j.set("allBubble",!0);this.pj();a=a||{};var c=this,d=this.j,e,g=d.getStatus().doubleClickZoom,h=!1;this.rc.push(f.event.addListener(d,"click",function(b){if(!1===h)h=new Ic({path:[b.lnglat,b.lnglat],strokeColor:a.strokeColor||"#1791fc",strokeOpacity:a.strokeOpacity||0.8,strokeWeight:a.strokeWeight||2,fillColor:a.fillColor||"#1791fc",fillOpacity:a.fillOpacity||0.35,strokeStyle:a.strokeStyle|| "solid",strokeDasharray:a.strokeDasharray||[10,5],zIndex:a.zIndex||10,extData:a.extData||{},bubble:!0}),h.ma=!0,h.id=c.de(),d.setStatus({doubleClickZoom:!1}),e=c.mj[h.id]={},e[h.id]=h,h.setMap(d);else{var g=h.getPath(),m=g.pop();g.push(b.lnglat,m);h.setPath(g)}},this));this.rc.push(f.event.addListener(d,"mousemove",function(a){if(h){var b=h.getPath();b.pop();b.push(a.lnglat);h.setPath(b)}},this));this.rc.push(f.event.addListener(d,"dblclick",function(){if(h){var a=h.getPath();a.pop();h.setPath(a); 2<h.getPath().length?(b(h),f.event.J(c,"draw",{obj:h})):h.setMap(null)}h=!1;d.setStatus({doubleClickZoom:g})},this));this.rc.push(f.event.addListener(d,"rightclick",function(){if(h){var a=h.getPath();a.pop();h.setPath(a);2<h.getPath().length?(b(h),f.event.J(c,"draw",{obj:h})):h.setMap(null)}h=!1;d.setStatus({doubleClickZoom:g})},this))},rectZoomIn:function(a){f.e.add(this.CLASS_NAME,"rectZoomIn");this.j.set("allBubble",!0);this.pj();a=a||{};var b=this.j,c=b.getStatus().dragEnable,d,e,g;this.rc.push(f.event.addListener(b, "mousedown",function(c){d=g=null;e=c.lnglat,g=c.pixel,d=new Ic({path:[c.lnglat],strokeColor:a.strokeColor||"#1791fc",strokeOpacity:a.strokeOpacity||0.8,strokeWeight:a.strokeWeight||2,fillColor:a.fillColor||"#1791fc",fillOpacity:a.fillOpacity||0.35,dragEnable:!1,strokeStyle:a.strokeStyle||"solid",strokeDasharray:a.strokeDasharray||[10,5],zIndex:a.zIndex||10,bubble:!0}),d.ma=!0,b.setStatus({dragEnable:!1}),d.setMap(b)},this));this.rc.push(f.event.R(document,"mousemove",function(a){d&&(a=f.A.Rh(a,b.H), b.Rl(a),a=b.Rl(a),a=[e,new f.U(a.N,e.Q),a,new f.U(e.N,a.Q),e],d.setPath(a))},this));this.rc.push(f.event.R(document,"mouseup",function(a){b.setStatus({dragEnable:c});d&&1<d.getPath().length&&(a=f.A.Rh(a,b.H),b.Rl(a),b.Rl(a),(3<Math.abs(a.x-g.x)||3<Math.abs(a.y-g.y))&&b.setFitView([d]));d&&d.setMap(null);d=null},this))},rectZoomOut:function(a){f.e.add(this.CLASS_NAME,"rectZoomOut");this.j.set("allBubble",!0);this.pj();a=a||{};var b=this.j,c=b.getStatus().dragEnable,d,e,g,h,k,l;this.rc.push(f.event.addListener(b, "mousedown",function(c){k||(e=c.lnglat,l=c.pixel,k=new Ic({path:[c.lnglat],strokeColor:a.strokeColor||"#1791fc",strokeOpacity:a.strokeOpacity||0.8,strokeWeight:a.strokeWeight||2,fillColor:a.fillColor||"#1791fc",fillOpacity:a.fillOpacity||0.35,strokeStyle:a.strokeStyle||"solid",strokeDasharray:a.strokeDasharray||[10,5],zIndex:a.zIndex||10,bubble:!0}),k.ma=!0,b.setStatus({dragEnable:!1}),k.setMap(b))},this));this.rc.push(f.event.addListener(b,"mousemove",function(a){k&&(g=a.lnglat,h=new f.U(g.N,e.Q), d=new f.U(e.N,g.Q),k.setPath([e,h,g,d,e]))},this));this.rc.push(f.event.R(document,"mouseup",function(a){b.setStatus({dragEnable:c});if(k&&1<k.getPath().length&&(a=f.A.Rh(a,b.H),b.Rl(a),b.Rl(a),!a.Ob(l))){b.getBounds();a=(e.N+h.N)/2;var d=(e.Q+h.Q)/2;b.setZoomAndCenter(b.get("zoom")-1,new f.U(a,d))}k&&k.setMap(null);k=l=null},this))},close:function(a){f.e.add(this.CLASS_NAME,"close");this.j.set("allBubble",!1);this.pj();var b;if(a){for(b in this.ha)if(this.ha.hasOwnProperty(b))for(;0<this.ha[b].length;)a= this.ha[b].shift(),a.setMap(null);for(b in this.mj)if(this.mj.hasOwnProperty(b)){for(var c in this.mj[b])this.mj[b].hasOwnProperty(c)&&(a=this.mj[b][c],a.setMap(null),this.mj[b][c]=null,delete this.mj[b][c]);this.mj[b]=null;delete this.mj[b]}this.Jh&&this.Jh.turnOff(!0)}}});window.AMap.MouseTool=f.SS; ')
_jsload_('AMap.RangingTool', 'f.lH=f.Y.extend({ia:[f.ga],C:function(a,b){this.CLASS_NAME="AMap.RangingTool";f.e.hb(this.CLASS_NAME,b);this.De={kl:0,Wm:1,xr:2};if(!a)throw"\\u521b\\u5efaAMap.RangingTool\\u5b9e\\u4f8b\\u5fc5\\u987b\\u4f20\\u5165\\u5730\\u56fe\\u5bf9\\u8c61\\u4f5c\\u4e3a\\u7b2c\\u4e00\\u4e2a\\u53c2\\u6570: new AMap.RangingTool(mapObj);";this.j=a;b=b||{};for(var c=f.r.Fb+"/images/pldot.png",d=new f.wc(12,12),e=new f.G(6,6),g=[],h=new f.G(-6,6),k=0;3>k;k+=1)g.push({icon:new Uc({size:d,imageOffset:new f.G(-12*k,0),image:c,anchor:e}), offset:new f.G(-6,-6),cursor:"pointer",bubble:!0,draggable:!1,zIndex:120});this.startMarkerOptions=g[0];this.midMarkerOptions=g[2];this.endMarkerOptions=g[1];this.lineOptions=this.tmpLineOptions={strokeColor:"#1791fc",strokeOpacity:0.8,strokeWeight:2,bubble:!0,draggable:!1};this.startLabelText="\\u8d77\\u70b9</div>";this.midLabelText="{d}\\u516c\\u91cc</div>";this.endLabelText="\\u5171{d}\\u516c\\u91cc</div>";this.startLabelOffset=this.midLabelOffset=this.endLabelOffset=h;this.UC=1E3;1===b.d&&(this.UC=1, this.midLabelText="{d}\\u7c73</div>",this.endLabelText="\\u5171{d}\\u7c73</div>");this.N2="<img src=\'"+f.r.Fb+"/images/remove.png\' />";this.M2="<img class=\'delimg\' src=\'"+f.r.Fb+"/images/destroy.png\' />";this.ME(this,b);this.jj=null;this.kc=this.De.kl},rb:function(a){this.ME(this,a)},ME:function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c],"tmpLineOptions"===c||"lineOptions"===c)&&(a[c].bubble=!0)},E9:function(a,b){var c={position:[void 0,"setPosition"],draggable:[!1,"setDraggable"],angle:[0, "setRotation"],content:[void 0,"setContent"],icon:[void 0,"setIcon"],offset:[void 0,"setOffset"],cursor:["default","setCursor"],zIndex:[100,"setzIndex"],opacity:[1,"setOpacity"]},d;for(d in c)if(c.hasOwnProperty(d)){var e=b[d]||c[d][0];if(void 0!==e)a[c[d][1]](e)}},turnOn:function(){f.e.add(this.CLASS_NAME,"turnOn");this.kc===this.De.kl&&(this.jK(),this.aI=this.j.getStatus().doubleClickZoom,this.j.setStatus({doubleClickZoom:!1}));f.event.J(this,"turnon")},turnOff:function(a){f.e.add(this.CLASS_NAME, "turnOff");this.kc===this.De.Wm?(this.g_(),this.j.setStatus({doubleClickZoom:this.aI})):this.kc===this.De.xr&&(this.ln(),this.iM(),this.j.setStatus({doubleClickZoom:this.aI}));a&&this.p_();f.event.J(this,"turnoff")},jK:function(){this.j.h("click",this.qB,this,!0);this.kc=this.De.Wm},g_:function(){this.j.D("click",this.qB,this);this.kc=this.De.kl},h_:function(){this.j.h("click",this.lK,this);this.j.h("mousemove",this.wl,this);this.j.h("rightclick",this.ln,this,!0);this.j.h("dblclick",this.ln,this, !0);this.aX=f.event.R(document,"keydown",this.Tv,this);this.kc=this.De.xr},iM:function(){this.j.D("click",this.qB,this);this.j.D("click",this.lK,this);this.j.D("mousemove",this.wl,this);this.j.D("rightclick",this.ln,this);this.j.D("dblclick",this.ln,this,!0);f.event.removeListener(this.aX);this.kc=this.De.kl},z0:function(){this.iM();this.jK();this.kc=this.De.Wm},qB:function(a){this.j.set("allBubble",!0);var b={bb:this.jj},c={Al:a.lnglat};b.kk=c;this.jj&&(this.jj.next=b);this.j6=this.j.get("dragEnable"); this.j.set("dragEnable",!1);this.jj=b;this.ys(c,this.startMarkerOptions);this.Ep(c,this.startLabelText,this.startLabelOffset,this.kp(c,b));this.h_();f.event.J(this,"addnode",{position:a.lnglat,marker:c.cb})},lK:function(a){var b=this.jj,c=b.kk,d={Al:a.lnglat,bb:c};c&&c.Al.Ob(a.lnglat)?this.ln():(c.next=d,b.kk=d,this.ys(d,this.midMarkerOptions),this.Ep(d,this.midLabelText,this.midLabelOffset,this.kp(d,b)),this.qL(b),this.wi&&this.wi.setPath([a.lnglat,a.lnglat]),f.event.J(this,"addnode",{position:a.lnglat, marker:d.cb}))},wl:function(a){var b=this.jj,c=b.kk.Al;this.wi||(this.wi=new Hc(this.tmpLineOptions),this.wi.name="tmpLine",this.wi.setMap(this.j));this.wi.ma=!0;this.wi.setPath([c,a.lnglat]);c=this.wi.getLength();b.Sd&&(c+=b.Sd.getLength());f.event.J(this,"move",{position:a.lnglat,distance:c,target:this})},Tv:function(a){27===a.keyCode&&this.ln()},ln:function(){this.j.set("allBubble",!1);var a=this.jj,b=a.kk;this.j.set("dragEnable",this.j6);this.endMarkerOptions.bubble=!1;b.bb?(this.ys(b,this.endMarkerOptions), this.Ep(b,this.endLabelText,this.endLabelOffset,this.kp(b,a),this.gJ(a))):this.ew(a);this.z0();this.wi&&(this.wi.setMap(null),this.wi=null);a.Sd?(a.Sd.setOptions({bubble:!1}),f.event.J(this,"end",{polyline:a.Sd,points:a.Sd.getPath(),distance:a.Sd.getLength()})):f.event.J(this,"cancel")},qL:function(a){for(var b=[],c=a.kk;c;)b.unshift(c.Al),c=c.bb;2>b.length?this.ew(a):a.Sd?a.Sd.setPath(b):(a.Sd=new Hc(this.lineOptions),a.Sd.ma=!0,a.Sd.name="recrdLine",a.Sd.setPath(b),a.Sd.setMap(this.j));f.event.J(this, "update")},ys:function(a,b){var c=!a.cb;this.ME(b,{position:a.Al});c?(a.cb=new Fc(b),a.cb.name="marker",a.cb.setMap(this.j),a.cb.ma=!0):(this.E9(a.cb,b),f.event.YM(a.cb));a.cb.h("click",f.A.stopPropagation)},Ep:function(a,b,c,d,e){var g=document.createElement("div"),h=0;a.mi&&(a.mi.setMap(null),delete a.mi);if(b.match("{d}")){for(var k=a.bb;k;)h+=k.Al.distance(k.next.Al),k=k.bb;h=(h/this.UC).toFixed(1===this.UC?1:2);b=b.replace("{d}",h)}g.className="amap-ranging-label";h=document.createElement("span"); h.innerHTML=b;g.appendChild(h);d&&g.appendChild(this.hJ(this.N2,d));e&&g.appendChild(this.hJ(this.M2,e));a.mi=new Fc({content:g,position:a.Al,offset:c,cursor:"pointer",zIndex:110,bubble:!0});a.mi.ma=!0;a.cb.name="label";a.mi.setMap(this.j)},t0:function(a){var b=a.kk;if(b){for(this.Ep(b,this.endLabelText,this.endLabelOffset,this.kp(b,a),this.gJ(a));b.bb;)b=b.bb,this.Ep(b,this.midLabelText,this.midLabelOffset,this.kp(b,a));this.Ep(b,this.startLabelText,this.startLabelOffset,this.kp(b,a))}},hJ:function(a, b){var c=document.createElement("span");c.innerHTML=a;f.A.h(c,"click",function(){b()});f.A.h(c,"mousedown",function(a){f.A.stopPropagation(a)});f.l.W&&f.l.Yd&&(f.A.h(c,"touchstart",function(a){f.A.stopPropagation(a)}),f.A.h(c,"touchend",function(a){f.A.stopPropagation(a)}),f.A.h(c,"touchmove",function(a){f.A.stopPropagation(a)}));return c},kp:function(a,b){var c=this;return function(d){c.kc!==c.De.xr&&c.xs(a,b);d&&f.A.stopPropagation(d)}},gJ:function(a){var b=this;return function(c){b.kc!==b.De.xr&& b.ew(a);c&&f.A.stopPropagation(c)}},xs:function(a,b){a.bb?a.bb.next=a.next:a.next&&this.ys(a.next,this.startMarkerOptions);a.next?a.next.bb=a.bb:a.bb&&(this.ys(a.bb,this.endMarkerOptions),b.kk=a.bb);a.bb=a.next=null;a.cb&&(a.cb.setMap(null),a.cb=null);a.mi&&(a.mi.setMap(null),a.mi=null);this.qL(b);this.t0(b);f.event.J(this,"removenode",{polyline:b.Sd,points:b.Sd?b.Sd.getPath():[],distance:b.Sd?b.Sd.getLength():null,target:this})},ew:function(a){var b=a.kk;a.Sd&&(a.Sd.setMap(null),a.Sd=null);for(;b;)b.cb&& (b.cb.setMap(null),b.cb=null),b.mi&&(b.mi.setMap(null),b.mi=null),b=b.bb;a.bb&&(a.bb.next=a.next);a.next?a.next.bb=a.bb:this.jj=a.bb;a.kk=a.bb=a.next=null},p_:function(){for(;this.jj;)this.ew(this.jj)}});window.AMap.RangingTool=f.lH; ')
_jsload_('AMap.AutoPanby', 'f.sS=f.Y.extend({C:function(a){this.CLASS_NAME="AMap.AutoPanby";this.rc=[];this.ha={};this.j=a;this.De={kl:0,Wm:1,xr:2};this.kc=this.De.kl;this.kD=!1},g9:function(){this.kc===this.De.kl&&(this.kc=this.De.Wm,f.event.addListener(this.j,"mousemove",this.ZP,this));f.event.J(this,"turnon")},f9:function(){this.kc===this.De.Wm&&(this.DR(),f.event.removeListener(this.ZP),this.kc=this.De.kl);f.event.J(this,"turnoff")},ZP:function(a){this.h3();this.DR();if(this.kc===this.De.Wm){var b=a.pixel.x;a=a.pixel.y; var c=this.j.getSize().width,d=this.j.getSize().height,e=0,g=0;20>b&&20<a&&20<d-a&&(e=20,this.Zl(),this.xk(e,g));20>b&&20>a&&20<d-a&&(g=e=20,this.Zl(),this.xk(e,g));20>b&&20<a&&20>d-a&&(e=20,g=-20,this.Zl(),this.xk(e,g));20>c-b&&20<a&&20<d-a&&(e=-20,this.Zl(),this.xk(e,g));20>c-b&&20>a&&20<d-a&&(e=-100,g=20,this.Zl(),this.xk(e,g));20>c-b&&20<a&&20>d-a&&(g=e=-20,this.Zl(),this.xk(e,g));20>a&&20<c-b&&20<b&&(g=20,this.Zl(),this.xk(e,g));20>d-a&&20<c-b&&20<b&&(g=-20,this.Zl(),this.xk(e,g))}},Zl:function(){this.kD= !0},h3:function(){this.kD=!1},xk:function(a,b){this.kD&&(this.j.panBy(a,b),this.RL=setTimeout(f.g.bind(function(){this.xk(a,b)},this),100))},DR:function(){this.RL&&clearTimeout(this.RL)}}); ')